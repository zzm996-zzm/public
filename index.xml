<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>å¼ å¿—æ˜</title>
        <link>https://example.com/</link>
        <description>Recent content on å¼ å¿—æ˜</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Thu, 23 Dec 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://example.com/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>PriorityQueue And  Greedy</title>
        <link>https://example.com/p/priorityqueue_greedy/</link>
        <pubDate>Thu, 23 Dec 2021 00:00:00 +0000</pubDate>
        
        <guid>https://example.com/p/priorityqueue_greedy/</guid>
        <description>&lt;img src="https://zzm-1300642547.file.myqcloud.com/blog/images/datastruct/2021-12-14-apple.jpeg" alt="Featured image of post PriorityQueue And  Greedy" /&gt;&lt;h2 id=&#34;ä»Šå¤©çš„æ¯æ—¥ä¸€é¢˜è¿˜æ¯”è¾ƒæœ‰è¶£&#34;&gt;ä»Šå¤©çš„æ¯æ—¥ä¸€é¢˜è¿˜æ¯”è¾ƒæœ‰è¶£~&lt;/h2&gt;
&lt;h3 id=&#34;é¢˜ç›®æè¿°&#34;&gt;é¢˜ç›®æè¿°&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯2021-12-24çš„æ¯æ—¥ä¸€é¢˜ï¼Œå¹³å®‰å¤œå®˜æ–¹è¿˜æ˜¯æŒºæœ‰è¶£å¼„äº†ä¸ªåƒè‹¹æœã€‚&lt;/p&gt;
&lt;p&gt;Leetcode &lt;strong&gt;ã€Œ&lt;a class=&#34;link&#34; href=&#34;https://leetcode-cn.com/problems/repeated-dna-sequences/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1705. åƒè‹¹æœçš„æœ€å¤§æ•°ç›®&lt;/a&gt;ã€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Tag : ã€Œè´ªå¿ƒã€ã€ã€Œä¼˜å…ˆé˜Ÿåˆ—ã€&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ‰ä¸€æ£µç‰¹æ®Šçš„è‹¹æœæ ‘ï¼Œä¸€è¿ n å¤©ï¼Œæ¯å¤©éƒ½å¯ä»¥é•¿å‡ºè‹¥å¹²ä¸ªè‹¹æœã€‚åœ¨ç¬¬ i å¤©ï¼Œæ ‘ä¸Šä¼šé•¿å‡º apples[i] ä¸ªè‹¹æœï¼Œè¿™äº›è‹¹æœå°†ä¼šåœ¨ days[i] å¤©åï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ i + days[i] å¤©æ—¶ï¼‰è…çƒ‚ï¼Œå˜å¾—æ— æ³•é£Ÿç”¨ã€‚ä¹Ÿå¯èƒ½æœ‰é‚£ä¹ˆå‡ å¤©ï¼Œæ ‘ä¸Šä¸ä¼šé•¿å‡ºæ–°çš„è‹¹æœï¼Œæ­¤æ—¶ç”¨ apples[i] == 0 ä¸” days[i] == 0 è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ä½ æ‰“ç®—æ¯å¤© æœ€å¤š åƒä¸€ä¸ªè‹¹æœæ¥ä¿è¯è¥å…»å‡è¡¡ã€‚æ³¨æ„ï¼Œä½ å¯ä»¥åœ¨è¿™ n å¤©ä¹‹åç»§ç»­åƒè‹¹æœã€‚&lt;/p&gt;
&lt;p&gt;ç»™ä½ ä¸¤ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ days å’Œ apples ï¼Œè¿”å›ä½ å¯ä»¥åƒæ‰çš„è‹¹æœçš„æœ€å¤§æ•°ç›®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 1ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥ï¼šapples = [1,2,3,5,2], days = [3,2,1,4,2]
è¾“å‡ºï¼š7
è§£é‡Šï¼šä½ å¯ä»¥åƒæ‰ 7 ä¸ªè‹¹æœï¼š

- ç¬¬ä¸€å¤©ï¼Œä½ åƒæ‰ç¬¬ä¸€å¤©é•¿å‡ºæ¥çš„è‹¹æœã€‚
- ç¬¬äºŒå¤©ï¼Œä½ åƒæ‰ä¸€ä¸ªç¬¬äºŒå¤©é•¿å‡ºæ¥çš„è‹¹æœã€‚
- ç¬¬ä¸‰å¤©ï¼Œä½ åƒæ‰ä¸€ä¸ªç¬¬äºŒå¤©é•¿å‡ºæ¥çš„è‹¹æœã€‚è¿‡äº†è¿™ä¸€å¤©ï¼Œç¬¬ä¸‰å¤©é•¿å‡ºæ¥çš„è‹¹æœå°±å·²ç»è…çƒ‚äº†ã€‚
- ç¬¬å››å¤©åˆ°ç¬¬ä¸ƒå¤©ï¼Œä½ åƒçš„éƒ½æ˜¯ç¬¬å››å¤©é•¿å‡ºæ¥çš„è‹¹æœã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 2ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥ï¼šapples = [3,0,0,0,0,2], days = [3,0,0,0,0,2]
è¾“å‡ºï¼š5
è§£é‡Šï¼šä½ å¯ä»¥åƒæ‰ 5 ä¸ªè‹¹æœï¼š
- ç¬¬ä¸€å¤©åˆ°ç¬¬ä¸‰å¤©ï¼Œä½ åƒçš„éƒ½æ˜¯ç¬¬ä¸€å¤©é•¿å‡ºæ¥çš„è‹¹æœã€‚
- ç¬¬å››å¤©å’Œç¬¬äº”å¤©ä¸åƒè‹¹æœã€‚
- ç¬¬å…­å¤©å’Œç¬¬ä¸ƒå¤©ï¼Œä½ åƒçš„éƒ½æ˜¯ç¬¬å…­å¤©é•¿å‡ºæ¥çš„è‹¹æœã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;å…¶å®ä¸€å¼€å§‹æˆ‘ä¹Ÿæ²¡å¾€è¿™å—æƒ³ï¼Œæˆ‘ä¸ªäººè§‰å¾—è´ªå¿ƒæ˜¯æŒºéš¾çš„ï¼Œå®ƒæ²¡æœ‰ä»€ä¹ˆç« æ³•å¥—è·¯å•Šï¼Œå°±æ˜¯ä¸€ä¸ªæ€æƒ³ã€‚ä¹Ÿæ²¡æœ‰æ¨¡æ¿ä¸åƒå †ï¼Œå †çš„æ¦‚å¿µå¾ˆæ¸…æ™°ï¼Œå¤§æ ¹å †ã€å°æ ¹å †ã€‚é¡ºæ‰‹ç‚¹å¼€é¢˜è§£çœ‹äº†ä¸€çœ¼å°±è¯´æ˜¯å †å»è§£ã€‚ä¸‹é¢å°±ç†ä¸€ä¸‹æ€è·¯&lt;/p&gt;
&lt;p&gt;æ€»ä½“ä½“ç°çš„æ˜¯ä¸€å¥è¯ä¼˜å…ˆåƒæ‰å¿«è¿‡æœŸçš„ã€‚é‚£ä¹ˆä»£ç å°±å¾ˆæ¸…æ™°äº†&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;//ç¬¬ä¸€ä¸€ä¸ªäºŒå…ƒç»„ pari{è¿™ç»„è‹¹æœçš„è¿‡æœŸæ—¶é—´ï¼Œè‹¹æœçš„æ•°é‡}
//å°†è‹¹æœåŠ å…¥ä¼˜å…ˆé˜Ÿåˆ— ä¸€è¾¹åŠ ä¸€è¾¹åƒï¼Œå…·ä½“æ˜¯æŒ‰ç…§ è‹¹æœçš„è¿‡æœŸæ—¶é—´å»ºç«‹å°æ ¹å †ï¼Œä¼˜å…ˆåƒæ‰å¿«è¿‡æœŸçš„
//ç”¨ä¸€ä¸ªtime è®°å½•å½“å‰æ˜¯ç¬¬å‡ å¤©
//ä½¿ç”¨ä¸€ä¸ªå¾ªç¯ä¾æ¬¡å°†äºŒå…ƒç»„åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå…¶ä¸­ä¼šåˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸPop
//åŠ å…¥å®Œé˜Ÿåˆ—ä¹‹å ç›´æ¥ä½¿ç”¨
 				p := heap.Pop(&amp;amp;h).(pair)
        //æœ€å¤šåƒå¤šå°‘å¤© å’Œä¸€å…±å¤šå°‘ä¸ª ï¼Œæœ€å¤šåªèƒ½åƒè¿™ä¹ˆå¤š ä¸èƒ½å†å¤šäº†
        num := min(p.end-time,p.left)
        ans += num
        time+= num
     
     å¿«é€Ÿè®¡ç®—å¯åƒè‹¹æœæ•°é‡

&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//ç”¨golangçš„å †æ˜¯çœŸçš„æŒºè´¹åŠ²çš„ æˆ‘å®è¯è¯´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;eatenApples&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;apples&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;days&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hp&lt;/span&gt; 
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; 
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; 
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;apples&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;heap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;apples&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;heap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;days&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;apples&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]})&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;nx&#34;&gt;heap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;heap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
       
        &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;heap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//æœ€å¤šåƒå¤šå°‘å¤© å’Œä¸€å…±å¤šå°‘ä¸ª ï¼Œæœ€å¤šåªèƒ½åƒè¿™ä¹ˆå¤š ä¸èƒ½å†å¤šäº†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;num&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;num&lt;/span&gt;
      
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;


&lt;span class=&#34;c1&#34;&gt;//è¿™é‡Œæ˜¯ç›´æ¥æ‹·è´å®˜æ–¹çš„ æ‡’å¾—å†™äº†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pair&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hp&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pair&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;            &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Less&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;       &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Pop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;   &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>Rabin-Karp</title>
        <link>https://example.com/p/rabin-karp/</link>
        <pubDate>Thu, 23 Dec 2021 00:00:00 +0000</pubDate>
        
        <guid>https://example.com/p/rabin-karp/</guid>
        <description>&lt;img src="https://zzm-1300642547.file.myqcloud.com/blog/images/datastruct/clipboard_20211223_050137.png" alt="Featured image of post Rabin-Karp" /&gt;&lt;h2 id=&#34;ä»Šå¤©å­¦ä¸€ä¸‹å­—ç¬¦ä¸²hash&#34;&gt;ä»Šå¤©å­¦ä¸€ä¸‹å­—ç¬¦ä¸²Hash&lt;/h2&gt;
&lt;h3 id=&#34;é¢˜ç›®æè¿°&#34;&gt;é¢˜ç›®æè¿°&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯å‰ç½®é¢˜ï¼Œå¦‚æœä¸æƒ³çœ‹å¯ä»¥å¾€åè·³&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ LeetCode ä¸Šçš„ &lt;strong&gt;ã€Œ&lt;a class=&#34;link&#34; href=&#34;https://leetcode-cn.com/problems/repeated-dna-sequences/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;187. é‡å¤çš„DNAåºåˆ—&lt;/a&gt;ã€&lt;/strong&gt;ï¼Œéš¾åº¦ä¸º &lt;strong&gt;ã€Œä¸­ç­‰ã€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Tag : ã€Œæ»‘åŠ¨çª—å£ã€ã€ã€Œå“ˆå¸Œè¡¨ã€ã€ã€Œå­—ç¬¦ä¸²å“ˆå¸Œã€ã€ã€Œå‰ç¼€å’Œã€&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ‰€æœ‰ DNA éƒ½ç”±ä¸€ç³»åˆ—ç¼©å†™ä¸º &lt;code&gt;&#39;A&#39;&lt;/code&gt;ï¼Œ&lt;code&gt;&#39;C&#39;&lt;/code&gt;ï¼Œ&lt;code&gt;&#39;G&#39;&lt;/code&gt; å’Œ &lt;code&gt;&#39;T&#39;&lt;/code&gt; çš„æ ¸è‹·é…¸ç»„æˆï¼Œä¾‹å¦‚ï¼š&lt;code&gt;&amp;quot;ACGAATTCCG&amp;quot;&lt;/code&gt;ã€‚åœ¨ç ”ç©¶ DNA æ—¶ï¼Œè¯†åˆ« DNA ä¸­çš„é‡å¤åºåˆ—æœ‰æ—¶ä¼šå¯¹ç ”ç©¶éå¸¸æœ‰å¸®åŠ©ã€‚&lt;/p&gt;
&lt;p&gt;ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ‰¾å‡ºæ‰€æœ‰ç›®æ ‡å­ä¸²ï¼Œç›®æ ‡å­ä¸²çš„é•¿åº¦ä¸º10 ï¼Œä¸”åœ¨ DNA å­—ç¬¦ä¸² &lt;code&gt;s&lt;/code&gt; ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 1ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥ï¼šs = &amp;quot;AAAAACCCCCAAAAACCCCCCAAAAAGGGTTT&amp;quot;
è¾“å‡ºï¼š[&amp;quot;AAAAACCCCC&amp;quot;,&amp;quot;CCCCCAAAAA&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 2ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥ï¼šs = &amp;quot;AAAAAAAAAAAAA&amp;quot;
è¾“å‡ºï¼š[&amp;quot;AAAAAAAAAA&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h4 id=&#34;æ»‘åŠ¨çª—å£&#34;&gt;æ»‘åŠ¨çª—å£&lt;/h4&gt;
&lt;p&gt;å…¶å®æœ€æœ´ç´ çš„åšæ³•ï¼Œçœ‹å®Œé¢˜ç›®æˆ‘ä¸ªäººçš„ç¬¬ä¸€ååº”å°±æ˜¯æ»‘åŠ¨çª—å£ï¼Œç”±äºé™å®šäº†DNAå­—ç¬¦ä¸²é•¿åº¦10ï¼Œæ‰€ä»¥åªéœ€è¦é™å®šçª—å£ä¸º10ï¼Œæ¯æ¬¡å¾€å³æ»‘å°±è¡Œäº†ã€‚ç„¶åå°†æ¯æ¬¡æ»‘åŠ¨çš„ç»“æœä¿å­˜åˆ°mapä¸­ ï¼Œåªè¦mapå‡ºç°äº†é‡å¤çš„å…ƒç´ å°±å¯ä»¥æ·»åŠ åˆ°resulté‡Œé¢&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;findRepeatedDnaSequences&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
     &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
     &lt;span class=&#34;nx&#34;&gt;L&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;
     &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
     &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;L&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
       &lt;span class=&#34;c1&#34;&gt;//è·å–substr
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;         &lt;span class=&#34;nx&#34;&gt;sub&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;L&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;
       &lt;span class=&#34;c1&#34;&gt;//å¦‚æœsub str æœ‰2ä¸ªäº† é‚£ä¹ˆå°±åŠ å…¥åˆ°ç»“æœé›†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;         &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;  &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;L&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
         &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
     &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
  &lt;span class=&#34;c1&#34;&gt;//è¿”å›ç»“æœé›†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å­—ç¬¦ä¸²hash&#34;&gt;å­—ç¬¦ä¸²Hash&lt;/h4&gt;
&lt;p&gt;æ¥ç€ä»Šå¤©çš„ä¸»é¢˜ï¼Œå­—ç¬¦ä¸²Hashåšæ³•ï¼Œåœ¨æå®¢æ—¶é—´ä¸“æ ä¸­å¤ä¹ äº†ä¸€éJava JDK hashçš„åšæ³•&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hashCode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;31&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;getChar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ä¸Šé¢çš„å…¬å¼å¯ä»¥è¿™æ ·æ¨åˆ°ä¸‹ï¼Œæˆ‘çœ‹ &lt;a class=&#34;link&#34; href=&#34;https://time.geekbang.org/column/intro/100100901?tab=catalog&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¾®æ‰°ç†è®º&lt;/a&gt; æ˜Šå“¥çš„æ–‡ç« ä¸­æœ‰äº›å‡ºä¸€ä¸ªå…¬å¼ï¼Œå¯¹äºæ•°å­¦ä¸å¤ªå¥½çš„æˆ‘ä»¥å‰æˆ‘æ˜¯ä¼šç›´æ¥è·³è¿‡çš„ï¼Œç°åœ¨æ…¢ä¸‹æ¥å…ˆä»å…¬å¼æ˜¯æ€ä¹ˆæ¨å‡ºæ¥çš„çœ‹çœ‹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;s[0]*31^(n-1) + s[1]*31^(n-2) + &amp;hellip; + s[n-1]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‡è®¾ byteæ•°ç»„é•¿åº¦ä¸º3 æˆ‘ä»¬æ¥æŠŠforå¾ªç¯å±•å¼€æ¥çœ‹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;i = 0 -&amp;gt; h = 31 * 0  + byte[0]&lt;/p&gt;
&lt;p&gt;i = 1 -&amp;gt; h = 31 * (31 * 0 + byte[0]) + val[1]&lt;/p&gt;
&lt;p&gt;i = 2 -&amp;gt; h = 31 * (31 * (31 * 0 + byte[0]) + val[1]) + val[2]&lt;/p&gt;
&lt;p&gt;h = 31 * 31 * 31 * 0 + 31 * 31 * val[0] + 31 * val[1] + val[2]&lt;/p&gt;
&lt;p&gt;h = 31 ^ n-1 * val[0]  + 31 ^ n-2 * val[1]  + val[2]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»§ç»­å¾€ä¸‹çœ‹å°±æ˜¯è¯´ ä¸ºä»€ä¹ˆJDKè¦é€‰æ‹©31&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;31 å¯ä»¥è¢«ä¼˜åŒ–æˆ  31 * i =  (i &amp;laquo; 5) - i  è¿™ä¸ªå¾ˆç®€å•&lt;/li&gt;
&lt;li&gt;å…³äº31è¿™ä¸ªè´¨æ•°ä¸å¤§ä¸å°ï¼Œä½œä¸ºä¹˜å­æº¢å‡ºä¸ä¼šå¤ªä¸¥é‡ï¼Œå¹¶ä¸”å†²çªçš„æ¦‚ç‡ä¹Ÿå¾ˆå°ï¼Œè¿™é‡Œåªæ˜¯ç®€å•æè¿°ä¸‹ æœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±å»æµ‹è¯•ä¸€ä¸‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å›å½’æ­£é¢˜ï¼Œå¯¹äºDNAåºåˆ—è¿™é“é¢˜æ¢ç¬¬äºŒä¸ªåšæ³•å°±æ˜¯å­—ç¬¦ä¸²Hashï¼Œè¿™é‡Œæˆ‘ç›´æ¥å­¦äººç²¾æˆ‘å­¦ä¸€ä¸‹Javaå®šä¹‰ä¹˜å­ä¸º31&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//å­—ç¬¦ä¸²Hash
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;findRepeatedDnaSequences&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;P&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;31&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	
    &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
     	&lt;span class=&#34;c1&#34;&gt;//é‡‡ç”¨å‰ç¼€å’Œæ€æƒ³ï¼Œæ¯æ¬¡æŠŠä¸Šæ¬¡çš„hashçŠ¶æ€è½¬ç§»è¿‡æ¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;P&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;P&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// fmt.Println(h)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// fmt.Println(p)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;


    &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;

        &lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ©ç”¨å‰ç¼€å’Œçš„æ€æƒ³ï¼ŒåŠ ä¸Šä¸€ä¸ªè´¨æ•°ï¼Œè§£å†³hashå†²çªçš„é—®é¢˜&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœæº¢å‡ºäº†ä»–ä¼šè‡ªåŠ¨å–æ¨¡ï¼Œè¿™å°±æ˜¯ä¸ºäº†è¦åŠ ä¸€ä¸ªä¹˜æ•°å› å­æ¥è§£å†³hashå†²çª&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;**hash := h[j] - h[i-1] * p[j-i+1] **&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²ç™»åœºçš„å“ˆå¸Œæ•°ç»„hå’Œä¸€ä¸ªæ¬¡æ–¹æ•°ç»„pã€‚&lt;/p&gt;
&lt;p&gt;ç”±å­—ç¬¦ä¸²é¢„å¤„ç†å¾—åˆ°è¿™æ ·çš„å“ˆå¸Œæ•°ç»„å’Œæ¬¡æ–¹æ•°ç»„å¤æ‚åº¦ä¸ºO(n), å½“éœ€è¦è®¡ç®—å­ä¸²s[i&amp;hellip;j]çš„å“ˆå¸Œå€¼ï¼Œåªéœ€è¦åˆ©ç”¨å‰ç¼€å’Œæ€æƒ³ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¿™ä¸ªå…¬å¼å°±å¯ä»¥åœ¨O(1)çš„æ—¶é—´å¾—åˆ°Hashå€¼&lt;/p&gt;
&lt;h5 id=&#34;æˆ‘ä¸¾ä¸ªæ —å­&#34;&gt;æˆ‘ä¸¾ä¸ªæ —å­ğŸŒ°&lt;/h5&gt;
&lt;p&gt;&amp;ldquo;AAAAACCCCC&amp;rdquo; æœ‰å¦‚ä¸‹å­—ç¬¦ä¸²ï¼Œæˆ‘å°†è´¨æ•°å› å­è®¾ç½®ä¸º2ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥çœ‹çœ‹ h å’Œ påˆ†åˆ«æ˜¯ä»€ä¹ˆ&lt;/p&gt;
&lt;p&gt;h = [0 65 195 455 975 2015 4097 8261 16589 33245 66557]&lt;/p&gt;
&lt;p&gt;p = [1 2 4 8 16 32 64 128 256 512 1024]&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬è¦è®¡ç®—  &amp;ldquo;AAA&lt;strong&gt;AACCC&lt;/strong&gt;CC&amp;rdquo; åŠ ç²—çš„å­ä¸²Hash åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Œå¯¹äºæœ€åä¸€ä¸ªCå¯¹åº”äºhæ•°ç»„ä¸­çš„ 16589&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå¯¹äºåˆå§‹çš„Aå¯¹åº”äº hä¸­çš„ç¬¬å››é¡¹ ä¸è¿‡å¯¹äºå‰ç¼€å’Œæˆ‘ä»¬è¦çŸ¥é“çš„æ˜¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å‰ç¼€å’Œæ˜¯ä»€ä¹ˆ ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰å¦‚ä¸‹æ•°ç»„&lt;/p&gt;
&lt;p&gt;nums = [1,2,3,4,5]&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå‰ç¼€å’Œæ•°ç»„å°±ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;presum = [0,1,3,6,10,15] presumä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æ˜¯numsä¸­çš„å’Œï¼Œæ¯”å¦‚6 å°±æ˜¯ 1+2+3 å¾—åˆ°çš„ã€‚å¯ä»¥å¾—åˆ°è¿™ä¹ˆä¸€ä¸ªå¼å­ã€‚&lt;/p&gt;
&lt;p&gt;S3 = A1+A2+A3 = 1+2+3 = 6&lt;/p&gt;
&lt;p&gt;S1 = A1 = 1&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆS3 - S1 = ï¼ˆA1+A2+A3ï¼‰- (A1ï¼‰ = A2+A3 = 2+3 =5&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å¯ä»¥å¾—å‡ºç»“è®º å‰ç¼€å’Œæ•°ç»„ä¸­çš„å€¼å‡å»æŸä¸€é¡¹æ—¶ï¼Œæ˜¯ä»–ä»¬ä¹‹é—´çš„å’Œ ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä½¿ç”¨çš„æ•°å­—æ˜¯ 455 è€Œä¸æ˜¯ 975ï¼Œ å°†æ•°å€¼ä»£å…¥è¿›æ•°ç»„å¯ä»¥å¾—åˆ°&lt;/p&gt;
&lt;p&gt;16589 - 455 * 32 = 2029 ,æ‰€ä»¥ 2029å°±æ˜¯è¿™ä¸ªå­ä¸² **&amp;ldquo;AACCC&amp;rdquo;**çš„Hashå€¼äº†ï¼Œæˆ‘ä»¬æ±‚è¯ä¸€ä¸‹å®ƒçš„æ­£ç¡®æ€§&lt;figure 
	&gt;
	&lt;a href=&#34;https://zzm-1300642547.file.myqcloud.com/blog/images/datastruct/rabin-karp%E9%80%86%E6%8E%A8%E8%BF%87%E7%A8%8B.png&#34; &gt;
		&lt;img src=&#34;https://zzm-1300642547.file.myqcloud.com/blog/images/datastruct/rabin-karp%E9%80%86%E6%8E%A8%E8%BF%87%E7%A8%8B.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;avatar&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;avatar&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç›´æ¥æ‹¿æ§åˆ¶å°ç®—å˜› æˆ‘å°±æ‡’å¾—ç®—äº†&lt;/p&gt;
&lt;h4 id=&#34;è¿›å…¥ä¸»é¢˜&#34;&gt;è¿›å…¥ä¸»é¢˜&lt;/h4&gt;
&lt;p&gt;ä»Šå¤© è¿™æ˜¯ LeetCode ä¸Šçš„ &lt;strong&gt;ã€Œ&lt;a class=&#34;link&#34; href=&#34;https://leetcode-cn.com/problems/longest-duplicate-substring/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1044. æœ€é•¿é‡å¤å­ä¸²&lt;/a&gt;ã€&lt;/strong&gt;ï¼Œéš¾åº¦ä¸º &lt;strong&gt;ã€Œå›°éš¾ã€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Tag : ã€Œæ»‘åŠ¨çª—å£ã€ã€ã€Œå“ˆå¸Œè¡¨ã€ã€ã€Œå­—ç¬¦ä¸²å“ˆå¸Œã€ã€ã€Œå‰ç¼€å’Œã€ã€ã€ŒäºŒåˆ†æŸ¥æ‰¾ã€&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè€ƒè™‘å…¶æ‰€æœ‰ é‡å¤å­ä¸² ï¼šå³ï¼Œs çš„è¿ç»­å­ä¸²ï¼Œåœ¨ s ä¸­å‡ºç° 2 æ¬¡æˆ–æ›´å¤šæ¬¡ã€‚è¿™äº›å‡ºç°ä¹‹é—´å¯èƒ½å­˜åœ¨é‡å ã€‚&lt;/p&gt;
&lt;p&gt;è¿”å› ä»»æ„ä¸€ä¸ª å¯èƒ½å…·æœ‰æœ€é•¿é•¿åº¦çš„é‡å¤å­ä¸²ã€‚å¦‚æœ s ä¸å«é‡å¤å­ä¸²ï¼Œé‚£ä¹ˆç­”æ¡ˆä¸º &amp;quot;&amp;quot; ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 1ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥ï¼šs = &amp;quot;banana&amp;quot;
è¾“å‡ºï¼š&amp;quot;ana&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 2ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥ï¼šs = &amp;quot;abcd&amp;quot;
è¾“å‡ºï¼š&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;æˆ‘ç›´æ¥è¯´ç­”æ¡ˆï¼Œè¿™ä¸ªæ˜¯æ±‚æœ€é•¿é‡å¤å­ä¸²ï¼Œå¯¹äºæœ€é¡¶ä¸ŠDNAçš„é¢˜ç›®æ˜¯é™å®šäº† DNAåºåˆ—ä¸º10,å¯¹äºè¿™ç§æœ‰é•¿åº¦é™å®šç›´æ¥æ»‘åŠ¨çª—å£é‚£çœŸçš„æ˜¯ç¾æ»‹æ»‹ã€‚å…¶å®æˆ‘ä¸€å¼€å§‹æ˜¯æƒ³ä¸åˆ°äºŒåˆ†çš„ï¼Œä½†æ˜¯å†™å®ŒDNAçš„é¢˜ç›®å°±çŸ¥é“å¦‚ä½•äºŒåˆ†äº†ï¼Œä¸è¿‡å…¶å®ç”¨åˆ°çš„æŠ€æœ¯åˆ—å‡ºæ¥åº”è¯¥æ˜¯ ã€æ»‘åŠ¨çª—å£ã€‘ ï¼Œã€äºŒåˆ†æŸ¥æ‰¾ã€‘ï¼Œã€å­—ç¬¦ä¸²Hashã€‘&lt;/p&gt;
&lt;p&gt;å…·ä½“æ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;äºŒåˆ†æ˜¯äºŒåˆ†é•¿åº¦ï¼ŒæŒ‰ç…§æ»‘åŠ¨çª—å£æ€æƒ³ï¼Œå¯¹äºç‰¹å®šçª—å£é‡Œé¢çš„å­—ç¬¦åšHashï¼Œä¿å­˜åˆ°Mapä¸­ï¼Œå¦‚æœmapå­˜åœ¨æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å½“å‰midé•¿åº¦æ˜¯æœ‰çš„ï¼Œä½¿ç”¨ä¸€ä¸ªMaxä¿å­˜ç›®å‰æœ€å¤§é•¿åº¦ã€‚æ­¤æ—¶left+1ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¯æ˜å½“å‰midé•¿åº¦æ˜¯ä¸å­˜åœ¨å­ä¸²çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶right-1 å¾€æ›´å°çš„é•¿åº¦å»å¯»æ‰¾å­ä¸²å°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹æ˜¯golangå®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;substrHash&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;check&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; 

&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;power&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;31&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;longestDupSubstring&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
    
    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;power&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;power&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;substrHash&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;check&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tl&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tl&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;substrHash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;has&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;has&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;//äºŒåˆ†ç»“æœ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; 
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;mid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;check&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mid&lt;/span&gt; 
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;l&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;


    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;


&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªç®—æ³•å°±æ˜¯ Rabin-Karp + äºŒåˆ†æœç´¢ ï¼Œæ‰€ä»¥ä¹‹å‰é‚£ä¸ªå­—ç¬¦ä¸²Hashå°±æ˜¯ Rabin-Karpç®—æ³•å•¦ï¼&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å…¶å®å¯¹äºæ•´ä¸ªæµç¨‹ï¼Œä»ä¸­ç­‰é¢˜åˆ°å›°éš¾é¢˜å°±æ˜¯å¤§é—®é¢˜æ‹†åˆ†çš„å°é—®é¢˜ï¼Œæ»‘åŠ¨çª—å£çš„ç‰ˆæœ¬æ˜¯æˆ‘2ä¸ªæœˆå‰é¡ºæ‰‹å°±å†™äº†ï¼Œä»Šå¤©è¿™é“å›°éš¾é¢˜å¦‚æœä¸ç”¨ä¸€äº›æŠ€å·§ç”¨æ»‘çª—å°±ç›´æ¥å˜æˆæš´åŠ›O(N^2)äº†ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ä¼˜å…ˆé˜Ÿåˆ—</title>
        <link>https://example.com/p/datastruct/</link>
        <pubDate>Mon, 01 Nov 2021 00:00:00 +0000</pubDate>
        
        <guid>https://example.com/p/datastruct/</guid>
        <description>&lt;img src="https://zzm-1300642547.file.myqcloud.com/blog/images/datastruct/wallhaven-rdql81.jpg" alt="Featured image of post ä¼˜å…ˆé˜Ÿåˆ—" /&gt;&lt;h1 id=&#34;ä¼˜å…ˆé˜Ÿåˆ—&#34;&gt;ä¼˜å…ˆé˜Ÿåˆ—&lt;/h1&gt;
&lt;h2 id=&#34;ç»ªè®º&#34;&gt;ç»ªè®º&lt;/h2&gt;
&lt;p&gt;ä¼˜å…ˆé˜Ÿåˆ—ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå †ï¼Œåˆ†ä¸ºå¤§æ ¹å †å’Œå°æ ¹å †ã€‚å †çš„ç”¨å¤„å¾ˆå¤šï¼Œæœ€å¸¸è§çš„ä¹Ÿå°±æ˜¯æ‰€è°“çš„å †æ’åºï¼Œå¯ä»¥å‘ç°ä¹Ÿæ˜¯åˆ©ç”¨äº†æ ‘çš„æ€æƒ³å»åšçš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿè®¸ç”¨å›¾è¡¨è¾¾æ›´åˆé€‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/c6/c64ad410265e4443e6432b3d9e3a49c3.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/c6/c64ad410265e4443e6432b3d9e3a49c3.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å †ï¼šç¬¦åˆä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€çš„å®Œå…¨äºŒå‰æ ‘ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ ¹èŠ‚ç‚¹çš„å€¼ â‰¥ å­èŠ‚ç‚¹çš„å€¼ï¼Œè¿™æ ·çš„å †è¢«ç§°ä¹‹ä¸ºæœ€å¤§å †ï¼Œæˆ–å¤§é¡¶å †ï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ ¹èŠ‚ç‚¹çš„å€¼ â‰¤ å­èŠ‚ç‚¹çš„å€¼ï¼Œè¿™æ ·çš„å †è¢«ç§°ä¹‹ä¸ºæœ€å°å †ï¼Œæˆ–å°é¡¶å †ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/aa/aa8d9755a01ad145a653ff50d99afd74.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/aa/aa8d9755a01ad145a653ff50d99afd74.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;æ˜ç¡®çš„åŸºç¡€çš„æ¦‚å¿µä¹‹åå¯ä»¥æ€è€ƒä¸€ä¸‹å †æ’åºã€‚é¦–å…ˆå°†æ•°åˆ—æ„å»ºæˆä¸€ä¸ªå¤§æ ¹å †ï¼ŒæŒ‰ç…§æ€§è´¨å¤§æ ¹å †çš„å †é¡¶ä¸€å®šæ˜¯æ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ¯æ¬¡å°†å †é¡¶çš„å…ƒç´ æ¢åˆ°æœ€åé¢å»ï¼Œç„¶åé‡æ–°æ„å»ºä¸€æ¬¡å¤§æ ¹å †ï¼Œä»¥æ­¤ç±»æ¨å°±ä¼šå¾—åˆ°ä¸€ä¸ªæ’åºå¥½çš„æ•°ç»„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆå§‹åŒ–å †&#34;&gt;åˆå§‹åŒ–å †&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆè°ˆè°ˆå¦‚ä½•åˆå§‹åŒ–å †ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æƒ…å†µ1: ä¸€ä¸ªä¸€ä¸ªæ’å…¥å…ƒç´ ï¼Œä¾æ¬¡æ„å»ºå †&lt;/li&gt;
&lt;li&gt;æƒ…å†µ2: å°†ä¸€ä¸ªæ•°ç»„æ„å»ºå †&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä»ä¸‹æ ‡1å¼€å§‹å½“åšæ ¹èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ•°ç»„çš„é•¿åº¦ä¸ºN+1ï¼ˆNä¸ºåŸæ•°ç»„é•¿åº¦ï¼‰è®¾æ ¹èŠ‚ç‚¹ä¸ºiï¼Œé‚£ä¹ˆ å…¬å¼å¯ä»¥å¾—å‡º&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;i = 1;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;left = i*2;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;right = left+1;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸å¦¨æ€è€ƒä¸€ä¸‹è¿™ä¸¤ç§æƒ…å†µçš„å¤æ‚åº¦ï¼Œç©ºé—´å¤æ‚åº¦æ¥è¯´å¯ä»¥ç›´æ¥ç»™å‡ºç»“è®ºï¼Œæ˜¯ O(1),åŸºæœ¬æ˜¯åœ¨åŸæ•°ç»„æ„å»ºå®Œå…¨äºŒå‰æ ‘ã€‚é‚£ä¹ˆå®é™…å¤æ‚åº¦å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;ç¬¬ä¸€ç§æƒ…å†µ&#34;&gt;ç¬¬ä¸€ç§æƒ…å†µ&lt;/h3&gt;
&lt;p&gt;æ€è€ƒä¸€ä¸ªè¿™æ ·çš„æƒ…å†µï¼ˆæœ€åçš„æƒ…å†µï¼Œå¤§æ ¹å †ï¼‰ï¼Œæ¯æ¬¡æ’å…¥çš„å…ƒç´ éƒ½æ˜¯å½“å‰åºåˆ—ä¸­æœ€å¤§çš„å…ƒç´ ,ç”±äºæ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ¯æ¬¡æ’å…¥éƒ½æ˜¯appendåœ¨æœ«ç«¯ã€‚é‚£ä¹ˆä¼šé€ æˆä»€ä¹ˆæ ·çš„æƒ…å†µå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å½“å‰èŠ‚ç‚¹ä¼šæ²¿ç€æ ‘çš„æ‹“æ‰‘ä¸€ç›´å¾€ä¸Šæµ®ï¼Œæ ‘çš„åº¦ä¸ºMï¼Œé‚£ä¹ˆæ ‘çš„é«˜åº¦æ˜¯log Mï¼Œä¸å¦¨ç§°ä¹‹ä¸ºNï¼Œé‚£ä¹ˆæ„å‘³ç€å½“å‰ä¼šåœ¨æ ‘ç»“æ„ä¸­ä¸Šæµ®Næ¬¡ã€‚é‚£ä¹ˆå‚è€ƒè¿™å¼ å›¾&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/5b/5b51f237a0c5cd6883dccaf044618f34.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/5b/5b51f237a0c5cd6883dccaf044618f34.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æ ‘çš„é«˜åº¦ä¸º3ï¼Œåº•å±‚æ¯ä¸ªèŠ‚ç‚¹å¾€ä¸Šæµ®åŠ¨çš„æ•°é‡éƒ½æ˜¯å½“èŠ‚ç‚¹çš„æ·±åº¦,æ‰€ä»¥åœ¨é«˜åº¦ä¸º3çš„çš„å †æ¯æ¬¡æ’å…¥èŠ‚ç‚¹æœ€åçš„æƒ…å†µå°±æ˜¯28ï¼ŒN=13ï¼Œlogn=3~4 æœ€å¤§ä¸Šæµ®æ¬¡æ•°æ˜¯28ï¼ˆä¸å¦¨å…ˆå®šä¹‰ä¸ºpushçš„æ“ä½œæ˜¯O(logn)ï¼‰&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºæ¯æ¬¡æ’å…¥èŠ‚ç‚¹ä¸Šæµ®çš„å¤æ‚åº¦O(n*logn)&lt;/p&gt;
&lt;h3 id=&#34;ç¬¬äºŒç§æƒ…å†µ&#34;&gt;ç¬¬äºŒç§æƒ…å†µ&lt;/h3&gt;
&lt;p&gt;æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœåˆå§‹åŒ–å°±æ˜¯ä¸€ä¸ªæ•°ç»„çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šæ€ä¹ˆæ„å»ºè¿™ä¸ªå †ï¼Ÿè«éè¿˜æ˜¯ä¸€ä¸ªä¸ªéå†æ’å…¥å—ï¼Ÿæ˜¾ç„¶ä¸ä¼šè¿™æ ·åšï¼Œä¼šæœ‰æ›´èªæ˜çš„åŠæ³•ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒç¬¬ä¸€ç§æƒ…å†µï¼Œæ—¢ç„¶è‡ªåº•å‘ä¸Šä¸Šæµ®ä¸å¥½ï¼Œé‚£ä¹ˆä¸‹æ²‰å‘¢ï¼Ÿæˆ‘ä»¬è¦çš„ç»“æœæ˜¯é™ä½å¤æ‚åº¦ï¼Œæ‰€ä»¥æ€è€ƒä¸€ä¸‹æ ‘çš„ç»“æ„ä¼šå‘ç°ï¼Œæ ‘çš„æ·±åº¦è¶Šæ·±ï¼Œé‚£ä¹ˆèŠ‚ç‚¹çš„æ•°é‡è¶Šå¤šï¼Œè¿™äº›ç»“æœéƒ½æ˜¯ä¸Šæµ®é‚£ä¹ˆå¤æ‚åº¦ä¼šå¾ˆé«˜ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸‹æ²‰ï¼Œé‚£ä¹ˆæœ€æ·±çš„èŠ‚ç‚¹å·²ç»åœ¨æœ€æ·±å¤„äº†ï¼Œå°±ä¸éœ€è¦ä¸‹æ²‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒè¿™æ®µä»£ç &lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// heapify
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//hè®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°ç»„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;down&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//down ä¸‹æ²‰
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;çœ‹çœ‹ä»–çš„è¯­ä¹‰ï¼Œè·å–æ•°ç»„çš„é•¿åº¦ä¸ºnï¼Œforå¾ªç¯ä¸­æ¯æ¬¡éƒ½ä¸‹æ²‰ï¼Œä½†æ˜¯iæ˜¯ n/2-1ã€‚æ‰€ä»¥çœŸæ­£çš„ä¼˜åŒ–å°±æ˜¯åœ¨è¿™ï¼Œå‚è€ƒè¿™å¼ å›¾ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨äºŒåˆ†çš„æ€æƒ³ã€‚å…ˆä»ä»æ ‘çš„ä¸­é—´å¾€ä¸‹ä¸‹æ²‰ï¼ˆè‡ªåº•å‘ä¸Šçš„ä¸‹æ²‰ï¼‰ï¼Œå¯ä»¥å‘ç°ï¼Œæ ¹èŠ‚ç‚¹æ— éœ€ä¸‹æ²‰ã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸‹æ²‰çš„å¤§å°åˆšå¥½æ˜¯ä»–çš„é«˜åº¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/cb/cb3b96595d0ab708dd77a71efd3db92b.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/cb/cb3b96595d0ab708dd77a71efd3db92b.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;çœ‹çœ‹ç»“æœï¼Œæ„å»ºä¸€ä¸ªå †çš„å¤æ‚åº¦ä¸ºO(n),è¾¾åˆ°äº†ä¸€ä¸ªè¿˜ä¸é”™çš„çº¿æ€§å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆ†æä»£ç &#34;&gt;åˆ†æä»£ç &lt;/h2&gt;
&lt;p&gt;è¯´äº†é‚£ä¹ˆå¤šç†è®ºä¸è´´ä»£ç æ€ä¹ˆè¡Œï¼Œä¸è¿‡golangæœ‰æä¾›heapçš„packageï¼Œè¿™é‡Œå°±è´´ä¸€ä¸‹æºç å°±è¡Œã€‚ç„¶åè§£é‡Šè§£é‡Šã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;hç†è§£ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæœ‰3ä¸ªæ–¹æ³•ã€‚Lessä½œæ¯”è¾ƒçš„ï¼Œswapäº¤æ¢å…ƒç´  Lenè·å–å½“å‰å…ƒç´ å¤§å°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸¤æ®µæœ€é‡è¦çš„ä»£ç &lt;/p&gt;
&lt;p&gt;upé¡¾åæ€ä¹‰ä¸Šæµ®ï¼ŒæŒ‰ç…§ä¹‹å‰çš„å…¬å¼ï¼Œjä¸ºå½“å‰èŠ‚ç‚¹ï¼Œé¦–å…ˆè·å–ä»–çš„çˆ¶äº²èŠ‚ç‚¹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;j-1/2 å¾—åˆ°çˆ¶äº²èŠ‚ç‚¹çš„ä¸‹æ ‡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœå½“å‰èŠ‚ç‚¹å¤§äºparentï¼Œé‚£ä¹ˆäº¤æ¢ï¼Œä»¥æ­¤ç±»æ¨ç›´åˆ°è¾¾åˆ°åˆé€‚çš„ä½ç½®æˆ–è€…åˆ°äº†æ ¹èŠ‚ç‚¹ã€‚æ­¤æ—¶ä¸Šæµ®ç»“æŸã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(logn),åŸºæœ¬å°±æ˜¯æ ‘çš„é«˜åº¦äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/91/91cdb4fddc19af82fae28cb70c3689e0.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/91/91cdb4fddc19af82fae28cb70c3689e0.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;é¡¾åæ€ä¹‰è¿™æ®µä»£ç æ˜¯ä¸‹æ²‰çš„ä»£ç ã€‚çœ‹èµ·æ¥è¿˜æŒºå¤šçš„ï¼Œä½†æ˜¯ä»”ç»†æ€è€ƒä¸€ä¸‹è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆè·å–å½“å‰èŠ‚ç‚¹çš„å·¦å­©å­ j1ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦å¤§äºæ•°ç»„é•¿åº¦äº†ï¼Œå³å·²ç»åˆ°å°¾å·´äº†ï¼Œè¿˜ä¼šåˆ¤æ–­æ•°æ®æ˜¯å¦æº¢å‡ºï¼ˆæƒ³çš„å‘¨åˆ°å•Šå®ï¼‰ã€‚ä¹‹åå†åˆ¤æ–­å·¦å­©å­æ˜¯å¦å¤§äºå³å­©å­ï¼Œå¦‚æœæ˜¯åˆ™ç›´æ¥å’Œparentæ¯”è¾ƒï¼Œå¦‚æœå¤§äºé‚£ä¹ˆparentä¸‹æ²‰ï¼Œç»§ç»­å’Œå·¦å³å­©å­æ¯”è¾ƒï¼Œäº¤æ¢ï¼Œç›´åˆ°åˆé€‚çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å¤æ‚åº¦ä¸º O(logn)&lt;/p&gt;
&lt;p&gt;æ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆä¸‹æ²‰è¿˜æœ‰è¿”å›ä¸€ä¸ªboolï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/2c/2c577a29f215a53a89f68b619188b9ac.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/2c/2c577a29f215a53a89f68b619188b9ac.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;pushæ“ä½œ&#34;&gt;pushæ“ä½œ&lt;/h3&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/6f/6f47f5ff56671ccc21e4483579e73de3.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/6f/6f47f5ff56671ccc21e4483579e73de3.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç›´æ¥pushåˆ°æ•°ç»„å°¾éƒ¨ï¼Œç„¶åä¸Šæµ®å³å¯ï¼Œå¤æ‚åº¦åŒup&lt;/p&gt;
&lt;h3 id=&#34;popæ“ä½œ&#34;&gt;popæ“ä½œ&lt;/h3&gt;
&lt;p&gt;å…¶å®åˆ é™¤æ“ä½œå°±æ¯”è¾ƒæœ‰æ„æ€ï¼Œåœ¨æˆ‘çš„å°è±¡é‡Œï¼Œæ— è®ºæ˜¯ä»€ä¹ˆæ ‘ï¼Œåªè¦è¿™æ£µæ ‘æœ‰ä¸€å®šç‰¹æ€§ï¼Œé‚£ä¹ˆåˆ é™¤å°±ä¸€å®šä¸ä¼šç®€å•ï¼ˆå®ådissçº¢é»‘ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹çœ‹å…·ä½“ä»£ç ï¼Œè¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå°†å †é¡¶çš„å…ƒç´ åˆ é™¤ï¼Œä»æ•°ç»„æœ«å°¾æ¢ä¸€ä¸ªæ–°èŠ‚ç‚¹ä¸Šæ¥ï¼Œç„¶åä¸‹æ²‰åˆ°å¯¹åº”çš„ä½ç½®å³å¯&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/10/10ec92f2a591e12489decb442e9bb7dc.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/10/10ec92f2a591e12489decb442e9bb7dc.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿˜æœ‰ä¸€æ®µä»£ç å¯ä»¥ç§ç§ï¼Œremoveå’Œpopä¸ä¸€æ ·ï¼Œpopæ˜¯ç›´æ¥å¼¹å‡ºå †é¡¶ï¼Œremoveæ˜¯åˆ é™¤å †ä¸­æŒ‡å®šæŸä¸ªä½ç½®çš„å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç§ç§å…·ä½“ä»£ç ï¼Œå¦‚æœæ˜¯æ•°ç»„æœ«å°¾ï¼Œåˆ™ç›´æ¥popåˆ é™¤æ‰å°±è¡Œäº†ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™å°†æ•°ç»„æœ«å°¾çš„å€¼å’Œéœ€è¦åˆ é™¤çš„èŠ‚ç‚¹è°ƒæ¢ä½ç½®ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦éœ€è¦ä¸‹æ²‰ï¼ï¼Œå¦‚æœä¸éœ€è¦ä¸‹æ²‰åˆ™ä¸Šæµ®ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆdownçš„éœ€è¦è¿”å›ä¸€ä¸ªboolçš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/ae/ae43765e18fdeaf17945f57f8189f3ca.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/ae/ae43765e18fdeaf17945f57f8189f3ca.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;fixæ“ä½œ&#34;&gt;Fixæ“ä½œ&lt;/h3&gt;
&lt;p&gt;fixæ“ä½œç±»ä¼¼updateï¼Œä¿®æ”¹å †ä¸­å…ƒç´ çš„å€¼ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦éœ€è¦æµ®åŠ¨&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/b0/b0e81006cca216933a07260fee192f4e.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/b0/b0e81006cca216933a07260fee192f4e.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;è°ˆè°ˆå®é™…åº”ç”¨&#34;&gt;è°ˆè°ˆå®é™…åº”ç”¨&lt;/h2&gt;
&lt;p&gt;é™¤äº†å †æ’åºæˆ‘ä»¬å¯ä»¥çœ‹çœ‹åœ¨å®é™…åº”ç”¨ä¼šè¿™ä¹ˆä½¿ç”¨å †è¿™ä¸ªæ•°æ®ç»“æ„&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/6c/6c9849921ec764c8aecdc7c3ab2cae6e.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/6c/6c9849921ec764c8aecdc7c3ab2cae6e.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç›´æ¥ç»™å‡ºç­”æ¡ˆï¼Œé¦–å…ˆåˆå§‹åŒ–å †ï¼Œç„¶åä¸€æ¬¡popï¼Œå½“popåˆ°ç¬¬kæ¬¡çš„æ—¶å€™å°±æ˜¯æœ€å¤§ç¬¬kä¸ªã€‚&lt;/p&gt;
&lt;p&gt;å†æ¥çœ‹çœ‹ç¬¬äºŒé¢˜&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://static001.geekbang.org/infoq/a5/a56942f2d4848cf934544e1b117cde9e.png&#34; &gt;
		&lt;img src=&#34;https://static001.geekbang.org/infoq/a5/a56942f2d4848cf934544e1b117cde9e.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è¿™è¿™é“é¢˜æˆ‘ä»¬æ€è€ƒä¸€ä¸‹åˆå¹¶3ä¸ªé“¾è¡¨ï¼Œæ€ä¹ˆç”¨åˆ°å †å‘¢ï¼Ÿå¹³æ—¶æ˜¯ä¸æ˜¯éƒ½æ˜¯æ•°ç»„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å…¶å®æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠé“¾è¡¨çš„å¤´å½“åšå•ç‹¬çš„å…ƒç´ æ„å»ºå †ã€‚æ¯”å¦‚æ­¤æ—¶æ„å»ºçš„å †æ˜¯&lt;/p&gt;
&lt;p&gt;ã€1ï¼Œ1ï¼Œ2ã€‘&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡popå…ƒç´ çš„æ—¶å€™æŠŠå½“å‰å †é¡¶æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åé‡ç½®å †ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚pop 1 è¿™ä¸ªå…ƒç´  ï¼Œé‚£ä¹ˆæŠŠå †é¡¶1å˜æˆä»–çš„next 4 é‡ç½®å †å°±å˜æˆäº†&lt;/p&gt;
&lt;p&gt;ã€1ï¼Œ2ï¼Œ4ã€‘&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°è¿™é‡Œæˆ‘ç›¸ä¿¡å·²ç»æ˜ç™½äº†å…·ä½“æ€è·¯äº†ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>AVL</title>
        <link>https://example.com/p/avl/</link>
        <pubDate>Mon, 25 Oct 2021 00:00:00 +0000</pubDate>
        
        <guid>https://example.com/p/avl/</guid>
        <description>&lt;img src="https://zzm-1300642547.file.myqcloud.com/blog/images/datastruct/avl.png" alt="Featured image of post AVL" /&gt;&lt;h1 id=&#34;avlæ ‘çš„æ ¸å¿ƒæ¦‚å¿µ&#34;&gt;AVLæ ‘çš„æ ¸å¿ƒæ¦‚å¿µ&lt;/h1&gt;
&lt;p&gt;å›åˆ°äºŒå‰æœç´¢æ ‘(BST)ä»–çš„ä¼˜ç‚¹æ˜¾è€Œæ˜“è§æ˜¯æŸ¥è¯¢å’Œæ’å…¥éƒ½ç›¸å¯¹æ¥è¯´éå¸¸çš„é«˜æ•ˆï¼Œåœ¨&lt;strong&gt;è¾ƒä¸ºå¥½&lt;/strong&gt;çš„æƒ…å†µä¸‹å¯ä»¥åšåˆ°éƒ½æ˜¯lognçš„æ“ä½œï¼Œnå¯¹åº”ä¸ºæ ‘çš„sizeã€‚å½“ç„¶è¿™è¯´çš„æ˜¯æœ€å¥½çš„æƒ…å†µä¸‹ï¼Œå¦‚æœè¯´æœ€åçš„æƒ…å†µï¼Œä¼šé€€åŒ–æˆä¸€ä¸ªé“¾è¡¨ï¼Œæ‰€ä»¥å»¶ä¼¸å‡ºäº†AVLæ ‘ï¼Œä¹‹åè¿˜æœ‰ä¸€ä¸ªçº¢é»‘æ ‘ã€‚&lt;/p&gt;
&lt;h3 id=&#34;avlçš„åŸºæœ¬æ¦‚å¿µ&#34;&gt;AVLçš„åŸºæœ¬æ¦‚å¿µ&lt;/h3&gt;
&lt;p&gt;AVLçš„åŸºæœ¬æ¦‚å¿µæ˜¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼ˆæ¯ä¸€ä¸ªå­èŠ‚ç‚¹ä¹Ÿå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼‰ï¼Œçš„å·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦ç›¸å·®ä¸è¶…è¿‡2ã€‚çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå›¾&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 324; 
			flex-basis: 778px&#34;
	&gt;
	&lt;a href=&#34;https://example.com/p/avl/1.png&#34; data-size=&#34;1229x379&#34;&gt;
		&lt;img src=&#34;https://example.com/p/avl/1.png&#34;
			width=&#34;1229&#34;
			height=&#34;379&#34;
			srcset=&#34;https://example.com/p/avl/1_huc5e36447260d774b0dc3a43e196ada27_43174_480x0_resize_box_3.png 480w, https://example.com/p/avl/1_huc5e36447260d774b0dc3a43e196ada27_43174_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚å·¦å›¾æ ¹èŠ‚ç‚¹4ï¼Œå®ƒçš„å·¦èŠ‚ç‚¹3çš„é«˜åº¦ä¸º0ï¼Œå³èŠ‚ç‚¹æ²¡æœ‰ç´¢å¼•ä½-1ï¼Œé«˜åº¦å·®çš„æ¦‚å¿µæ˜¯&lt;/p&gt;
&lt;p&gt;** å·¦å­èŠ‚ç‚¹é«˜åº¦ - å³å­èŠ‚ç‚¹çš„é«˜åº¦ = 0 - (-1ï¼‰ = 1**&lt;/p&gt;
&lt;p&gt;æ ¹èŠ‚ç‚¹2ï¼Œå®ƒçš„å·¦èŠ‚ç‚¹1çš„é«˜åº¦ä¸º0ï¼Œå³èŠ‚ç‚¹4çš„é«˜åº¦ä¸º1  æ‰€ä»¥ 0 - 1 = - 1&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶çŸ¥é“äº†AVLçš„å®šä¹‰ï¼Œé‚£ä¹ˆæŸ¥çœ‹å³å›¾æ˜¾è€Œæ˜“è§ã€‚å¯¹äºæ ¹èŠ‚ç‚¹7çš„å·¦å­æ ‘é«˜åº¦æ˜¯3ï¼ˆ2ï¼Œ4ï¼Œ5 | 2ï¼Œ4ï¼Œ3ï¼‰ï¼Œå³å­æ ‘é«˜åº¦ä¸º1ï¼ˆ8ï¼‰&lt;/p&gt;
&lt;p&gt;3 - 1 = 2 ä¸ç¬¦åˆAVLçš„å®šä¹‰&lt;/p&gt;
&lt;h3 id=&#34;avlçš„æ¥å£&#34;&gt;AVLçš„æ¥å£&lt;/h3&gt;
&lt;p&gt;AVLæ ‘æŸ¥è¯¢å¯ä»¥å®Œç¾ç»§æ‰¿BSTï¼Œæ‰€ä»¥éœ€è¦æ‰©å±•çš„æ¥å£æ˜¯æ’å…¥å’Œåˆ é™¤ä¸¤ä¸ªæ¥å£&lt;/p&gt;
&lt;h4 id=&#34;æ’å…¥æ¥å£&#34;&gt;æ’å…¥æ¥å£&lt;/h4&gt;
&lt;p&gt;é¦–å…ˆå‚è€ƒè¿™ä¸ªå›¾ï¼Œåœ¨æ’å…¥èŠ‚ç‚¹3ä¹‹å‰æ˜¯å¹³è¡¡çš„AVLï¼Œä½†æ˜¯æ’å…¥èŠ‚ç‚¹3ä¹‹åï¼Œå°±å¤±å»å¹³è¡¡äº†ï¼Œå¤±å»å¹³è¡¡çš„èŠ‚ç‚¹å°±æ˜¯èŠ‚ç‚¹6ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 142; 
			flex-basis: 340px&#34;
	&gt;
	&lt;a href=&#34;https://example.com/p/avl/2.png&#34; data-size=&#34;1372x966&#34;&gt;
		&lt;img src=&#34;https://example.com/p/avl/2.png&#34;
			width=&#34;1372&#34;
			height=&#34;966&#34;
			srcset=&#34;https://example.com/p/avl/2_hue2264cd0c1caa497ec8faa802276ac5c_94772_480x0_resize_box_3.png 480w, https://example.com/p/avl/2_hue2264cd0c1caa497ec8faa802276ac5c_94772_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æ­¤åˆ»å°±éœ€è¦æ—‹è½¬ï¼Œå˜æˆå¦‚ä¸‹è¿™æ ·&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 142; 
			flex-basis: 342px&#34;
	&gt;
	&lt;a href=&#34;https://example.com/p/avl/3.png&#34; data-size=&#34;1366x958&#34;&gt;
		&lt;img src=&#34;https://example.com/p/avl/3.png&#34;
			width=&#34;1366&#34;
			height=&#34;958&#34;
			srcset=&#34;https://example.com/p/avl/3_hu136e92c157edc6c2d27ef0c68afb11b7_92320_480x0_resize_box_3.png 480w, https://example.com/p/avl/3_hu136e92c157edc6c2d27ef0c68afb11b7_92320_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æ­¤åˆ»å°±å¹³è¡¡äº†ã€‚æ²¡é”™AVLå°±æ˜¯æ¯æ¬¡æ’å…¥åˆ¤æ–­æ˜¯å¦é«˜åº¦å¤±è¡¡ã€‚å¦‚æœå¤±å»å¹³è¡¡åˆ™é€‰æ‹©ã€‚å¦‚ä½•é€‰æ‹©å¤±å»å¹³è¡¡çš„èŠ‚ç‚¹ï¼Ÿå‚è€ƒå¤±è¡¡çš„å›¾ï¼Œ4æ²¡æœ‰å¤±å»å¹³è¡¡ï¼Œä½†æ˜¯6çš„å·¦èŠ‚ç‚¹ä¸º2ï¼Œå³èŠ‚ç‚¹ä¸º0ï¼Œè¿™å°±æ˜¯å¤±å»å¹³è¡¡äº†ã€‚æ‰€ä»¥æ—‹è½¬ç‚¹å°±æ˜¯æ ¹èŠ‚ç‚¹6ï¼&lt;/p&gt;
&lt;h5 id=&#34;æ—‹è½¬çš„4ç§æƒ…å†µ&#34;&gt;æ—‹è½¬çš„4ç§æƒ…å†µ&lt;/h5&gt;
&lt;p&gt;æ—‹è½¬çš„æƒ…å†µåœ¨é‚“å…¬çš„ä¹¦ä¸­æœ‰å¾ˆå¥½çš„æè¿°&lt;/p&gt;
&lt;p&gt;å•æ—‹ï¼Œåˆ†å·¦å³&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 121; 
			flex-basis: 292px&#34;
	&gt;
	&lt;a href=&#34;https://example.com/p/avl/4.png&#34; data-size=&#34;904x742&#34;&gt;
		&lt;img src=&#34;https://example.com/p/avl/4.png&#34;
			width=&#34;904&#34;
			height=&#34;742&#34;
			srcset=&#34;https://example.com/p/avl/4_hubee39a17213ad94cd2373627327acf40_105526_480x0_resize_box_3.png 480w, https://example.com/p/avl/4_hubee39a17213ad94cd2373627327acf40_105526_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;åŒæ—‹&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 192; 
			flex-basis: 462px&#34;
	&gt;
	&lt;a href=&#34;https://example.com/p/avl/5.png&#34; data-size=&#34;1326x688&#34;&gt;
		&lt;img src=&#34;https://example.com/p/avl/5.png&#34;
			width=&#34;1326&#34;
			height=&#34;688&#34;
			srcset=&#34;https://example.com/p/avl/5_hu0eb9ff7dc9d87961347908bc235c7f04_159827_480x0_resize_box_3.png 480w, https://example.com/p/avl/5_hu0eb9ff7dc9d87961347908bc235c7f04_159827_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;åˆ é™¤æ¥å£&#34;&gt;åˆ é™¤æ¥å£&lt;/h4&gt;
&lt;p&gt;åˆ é™¤çš„æƒ…å†µå’Œæ’å…¥å¾ˆåƒï¼Œä½¿ç”¨BSTçš„åˆ é™¤æ¥å£ï¼Œåˆ é™¤ä¹‹åè‡ªåº•å‘ä¸Šåˆ¤æ–­æ˜¯å¦å¤±å¹³è¡¡ã€‚ä»”ç»†å›æƒ³ä¸€ä¸‹ï¼Œæ’å…¥ä¸€ä¸ªèŠ‚ç‚¹å¦‚æœå¤±å»å¹³è¡¡ï¼Œåœ¨æ—‹è½¬ä¸€æ¬¡ä¹‹åä¼šæ¢å¤å¹³è¡¡ï¼Œçˆ¶èŠ‚ç‚¹ä¸€ç›´æ²¿ç€æ ¹èŠ‚ç‚¹çš„é«˜åº¦ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥åªéœ€è¦æ—‹è½¬ä¸€æ¬¡å³å¯ï¼Œä½†æ˜¯åˆ é™¤æ“ä½œæ˜¯åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ—‹è½¬ä¹‹åé«˜åº¦ä¼š-1ã€‚ç¼ºå¤±é«˜åº¦çš„æƒ…å†µä¼šæ²¿ç€é“¾è·¯ä¸€ç›´å¾€ä¸Šè”“å»¶ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è§£å†³åŠæ³•å°±æ˜¯ å½“æ—‹è½¬å®Œä¹‹ååˆ¤æ–­çˆ¶èŠ‚ç‚¹æ˜¯å¦ä¾æ—§å¤±å¹³è¡¡&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;datastructure&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;AVLInterface&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;AVL&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;BST&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewAVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;AVL&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;AVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewBST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;AVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;InsertAVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BinNode&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//BST insert
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;//ä»xçš„çˆ¶èŠ‚ç‚¹é€å±‚æ£€æŸ¥æ˜¯å¦é«˜åº¦å¤±è¡¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;AvlBalanced&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//å¦‚æœå¤±è¡¡äº†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;			&lt;span class=&#34;c1&#34;&gt;//æ—‹è½¬å¹³è¡¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;			&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;FromParentTo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;RotateAt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;TallerChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;TallerChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;UpdateHeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;AVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;RemoveAVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;searchr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;hot&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BinNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
	&lt;span class=&#34;nf&#34;&gt;removeAt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;hot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;AvlBalanced&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;c1&#34;&gt;//æ—‹è½¬å¹³è¡¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;			&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;FromParentTo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;RotateAt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;TallerChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;TallerChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;UpdateHeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;AVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;FromParentTo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BinNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BinNode&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;IsRoot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;IsLChild&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;parent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Balanced&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BinNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Stature&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Stature&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;BalFac&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BinNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Stature&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Stature&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;AvlBalanced&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BinNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;BalFac&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;BalFac&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;AVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;IsAVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BinNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;c1&#34;&gt;// fmt.Println(&amp;#34;æ˜¯ä¸€é¢—å®Œç¾çš„AVL!&amp;#34;)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;AvlBalanced&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ä¸æ˜¯å¹³è¡¡æ ‘&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;IsAVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;avl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;IsAVL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>è™šæ‹Ÿåœ°å€ç¿»è¯‘</title>
        <link>https://example.com/p/virtualaddress/</link>
        <pubDate>Sun, 12 Sep 2021 00:00:00 +0000</pubDate>
        
        <guid>https://example.com/p/virtualaddress/</guid>
        <description>&lt;img src="https://zzm-1300642547.file.myqcloud.com/blog/images/os/233154-15779791144569.jpg" alt="Featured image of post è™šæ‹Ÿåœ°å€ç¿»è¯‘" /&gt;&lt;h2 id=&#34;è™šæ‹Ÿåœ°å€ç¿»è¯‘&#34;&gt;è™šæ‹Ÿåœ°å€ç¿»è¯‘&lt;/h2&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://zzm-1300642547.file.myqcloud.com/blog/images/os/%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%801.png&#34; &gt;
		&lt;img src=&#34;https://zzm-1300642547.file.myqcloud.com/blog/images/os/%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%801.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://zzm-1300642547.file.myqcloud.com/blog/images/os/%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%802.png&#34; &gt;
		&lt;img src=&#34;https://zzm-1300642547.file.myqcloud.com/blog/images/os/%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%802.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20210911091039316&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20210911091039316&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€å¼ è™šæ‹Ÿåœ°å€è½¬æ¢æˆç‰©ç†åœ°å€çš„æµç¨‹å›¾ï¼Œcpuè§£æä¸€ä¸ªè™šæ‹Ÿåœ°å€ è§£æå‡ºVPNå’ŒVPO&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;VPOä»å›¾ä¸­å¯ä»¥çœ‹å‡ºå¯¹åº”çš„æ˜¯PPO ä¹Ÿå°±æ˜¯å›¾ä¸­çš„å12ä½å°±æ˜¯å¯¹åº”çš„ç‰©ç†çœŸå®åœ°å€çš„12ä½&lt;/p&gt;
&lt;p&gt;VPNå’ŒVPOä¸çœŸå®ç³»ç»Ÿä¸­é¡µçš„å¤§å°æ¯æ¯ç›¸å…³ï¼Œå¦‚æœé¡µçš„å¤§å°ä¸º4KB é‚£ä¹ˆå°±æ˜¯ 2^n = 4KB  n = 12&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥VPO = 12 å‰©ä¸‹çš„åœ°å€æ˜¯ VPN&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;VPNå¯¹åº”ç€TLBè¡¨ï¼Œè¿™å¼ è¡¨çš„ä½œç”¨ç”¨äºæ˜¯ç¼“å­˜çš„PPNï¼ŒPPNæ˜¯çœŸå®ç‰©ç†åœ°å€çš„é«˜40ä½ï¼ˆå›¾ä¸­å¯çŸ¥ï¼‰ï¼Œæ‰€ä»¥å°±æ˜¯ä¸€ä¸ªç¼“å­˜è¡¨ï¼ŒTLBè¡¨çš„ä¸¤ä¸ªå¾ˆé‡è¦çš„å±æ€§&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TLBIï¼šTLBè¡¨çš„ç´¢å¼•&lt;/li&gt;
&lt;li&gt;TLBT:  TLBè¡¨çš„æ ‡è®°&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://zzm-1300642547.file.myqcloud.com/blog/images/os/%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%803.png&#34; &gt;
		&lt;img src=&#34;https://zzm-1300642547.file.myqcloud.com/blog/images/os/%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%803.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20210911100527106&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20210911100527106&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾TLBæ˜¯å››è·¯ç»„ç›¸è¿ï¼Œæ¯ç»„æœ‰4ä¸ªæ¡ç›®ã€‚ä¸€å…±æ˜¯16ä¸ªæ¡ç›®ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå¯ä»¥å¾—åˆ°çš„æ˜¯ 4 = 2^n  n=2 ã€‚é‚£ä¹ˆVPNçš„ä½2ä½å°±æ˜¯TLBIï¼Œå‰©ä¸‹çš„å°±æ˜¯TLBT&lt;/p&gt;
&lt;p&gt;æ ¹æ®å¦‚ä¸Šå‚æ•°ï¼Œå‡è®¾è™šæ‹Ÿåœ°å€æ˜¯ 0x0f3&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;0000 1111 0011&lt;/p&gt;
&lt;p&gt;å‡è®¾VPNæ˜¯ 00001111&lt;/p&gt;
&lt;p&gt;TLBT = 000011&lt;/p&gt;
&lt;p&gt;TLBI = 11&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯¹åº”å›¾ä¸­çš„æœ€åä¸€ç»„æ ‡è®°ä½ä¸º 0x3,å¦‚æœæœ‰æ•ˆä½æ˜¯1 ï¼Œåˆ™è¡¨ç¤ºå‘½ä¸­ è·å–åˆ°çš„PPN æ˜¯ 0xD&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¥ç€ä¸Šå›¾ï¼Œå¦‚æœåœ¨TLBè¡¨ä¸­å‘½ä¸­ï¼Œåˆ™è¿”å›PPN ç„¶åä¸ VPOï¼ˆPPOï¼‰ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­åˆ™å»æ‹¿ç€VPNå»é¡µè¡¨ä¸­è·å–PPNï¼Œç„¶åç¼“å­˜åˆ°TLBä¸­ï¼Œç„¶åæŠŠPPNå’ŒVPO(PPO) ç»“åˆèµ·æ¥å°±æ˜¯çœŸå®çš„ç‰©ç†åœ°å€ã€‚ç„¶åé€šè¿‡L1cacheï¼Œå¦‚æœL1cacheæ²¡æœ‰å‘½ä¸­åˆ™ä¸€æ¬¡å»L2,L3ï¼Œä¸»å­˜ä¸­è·å–æ•°æ®å†è¿”å›ç»™CPUï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªè™šæ‹Ÿåœ°å€ç¿»è¯‘æˆç‰©ç†åœ°å€ï¼Œå¹¶è·å–æ•°æ®çš„æµç¨‹&lt;/strong&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>å¤šçº§é¡µè¡¨</title>
        <link>https://example.com/p/pagetable/</link>
        <pubDate>Sat, 11 Sep 2021 00:00:00 +0000</pubDate>
        
        <guid>https://example.com/p/pagetable/</guid>
        <description>&lt;img src="https://zzm-1300642547.file.myqcloud.com/blog/images/os/234958-160502339805f5.jpg" alt="Featured image of post å¤šçº§é¡µè¡¨" /&gt;&lt;h1 id=&#34;å¤šçº§é¡µè¡¨å¦‚ä½•èŠ‚çº¦å†…å­˜&#34;&gt;å¤šçº§é¡µè¡¨å¦‚ä½•èŠ‚çº¦å†…å­˜&lt;/h1&gt;
&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;å‡è®¾è™šæ‹Ÿåœ°å€ç©ºé—´ä¸º32ä½ï¼ˆ4GBå†…å­˜ï¼‰æ¯ä¸ªé¡µè¡¨æ¡ç›®æ˜¯4Bï¼ˆå­—èŠ‚ï¼‰ï¼Œç„¶åæ¯ä¸€ä¸ªé¡µçš„å¤§å°æ˜¯4KBï¼Œé‚£ä¹ˆå¯¹åº”èµ·æ¥å°±æ˜¯ï¼Œå¦‚æœæ­¤æ—¶åªæœ‰ä¸€çº§é¡µè¡¨ã€‚é‚£ä¹ˆå°±æ˜¯ &lt;code&gt;4GB / 4KB = 1M&lt;/code&gt;  éœ€è¦1Mä¸ªé¡µè¡¨ï¼Œç„¶åç”±äºæ¯ä¸ªé¡µè¡¨æ¡ç›®æ˜¯4Bï¼Œé‚£ä¹ˆä¸€ä¸ªè¿›ç¨‹çš„éœ€è¦å¸¸é©»ä½¿ç”¨çš„é¡µè¡¨å†…å­˜æ˜¯ &lt;code&gt;1M * 4B = 4MB&lt;/code&gt; å†…å­˜ç©ºé—´ã€‚ æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªè¿™æ ·çš„4MBå ç”¨ï¼Œæ‰€ä»¥å¼€é”€ä¹Ÿæ˜¯ä¸å°çš„&lt;/p&gt;
&lt;p&gt;æ¢æˆå¤šçº§çº§é¡µè¡¨ ï¼Œå‡è®¾ä¸€çº§é¡µè¡¨æ˜ å°„çš„æ˜¯4MBï¼Œç„¶åäºŒçº§é¡µè¡¨æ˜ å°„4KB æ˜¯&lt;code&gt;4GB /4MB = 1K&lt;/code&gt; éœ€è¦1kä¸ªä¸€çº§é¡µè¡¨æ¡ç›®ï¼Œç„¶åæ¯ä¸ªæ¡ç›®çš„å†…å®¹å¯¹åº”ä¸€ä¸ªäºŒçº§é¡µè¡¨ï¼Œæ¯ä¸ªäºŒçº§é¡µè¡¨æœ‰ &lt;code&gt;4MB /  4KB = 1K&lt;/code&gt; ä¸ªé¡µè¡¨æ¡ç›®ï¼ŒäºŒçº§é¡µè¡¨é‡Œé¢çš„å†…å®¹æ‰æ˜¯çœŸå®çš„ç‰©ç†åœ°å€ã€‚è¿™æ ·å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªå…¬å¼&lt;/p&gt;
&lt;p&gt;1024 * 4 + 1024 * 1024 * 4 =  4.004MB è™½ç„¶çœ‹èµ·æ¥è¿˜å¤§äº†ä¸€ç‚¹ï¼Œä¸è¿‡å®é™…ä¸Š åªæœ‰1çº§é¡µè¡¨æ‰éœ€è¦å¸¸é©»å†…å­˜&lt;/p&gt;
&lt;p&gt;å…¶å®å¯ä»¥æƒ³æƒ³å±€éƒ¨æ€§åŸç†&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•èŠ‚çº¦å†…å­˜&#34;&gt;å¦‚ä½•èŠ‚çº¦å†…å­˜&lt;/h2&gt;
&lt;h4 id=&#34;äºŒçº§é¡µè¡¨å¯ä»¥ä¸å­˜åœ¨&#34;&gt;äºŒçº§é¡µè¡¨å¯ä»¥ä¸å­˜åœ¨&lt;/h4&gt;
&lt;p&gt;4Gçš„è™šæ‹Ÿåœ°å€éœ€è¦çš„é¡µè¡¨æ˜¯1Mä¸ª éœ€è¦4Mçš„ç©ºé—´ï¼Œæ¢æˆäºŒçº§é¡µè¡¨ï¼ˆ2ä¸ªé¡µè¡¨ï¼‰åªæœ‰å°±å˜æˆäº† 4GB/4MB = 1K ä¸ªä¸€çº§é¡µè¡¨ï¼Œç„¶åæ¯ä¸ªäºŒçº§é¡µè¡¨é‡Œé¢å­˜çš„æ‰æ˜¯çœŸæ­£çš„PPNã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºç¨‹åºçš„ä¸€çº§åˆ—è¡¨éœ€è¦å¸¸é©»å†…å­˜ï¼Œå¦‚æœäºŒçº§é¡µè¡¨åªæœ‰20%è¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ˜¯&lt;/p&gt;
&lt;p&gt;1024 * 4 + 0.2 * 1024 * 1024 * 4 = 0.8MBå¸¸é©»å†…å­˜ æ¯”ä¹‹å‰çš„4MBå°äº†å¾ˆå¤š&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆä¸ºä»€ä¹ˆä¸åˆ†çº§çš„é¡µè¡¨å°±åšä¸åˆ°è¿™æ ·èŠ‚çº¦å†…å­˜å‘¢ï¼Ÿæˆ‘ä»¬ä»é¡µè¡¨çš„æ€§è´¨æ¥çœ‹ï¼Œä¿å­˜åœ¨ä¸»å­˜ä¸­çš„é¡µè¡¨æ‰¿æ‹…çš„èŒè´£æ˜¯å°†è™šæ‹Ÿåœ°å€ç¿»è¯‘æˆç‰©ç†åœ°å€ï¼›å‡å¦‚è™šæ‹Ÿåœ°å€åœ¨é¡µè¡¨ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„é¡µè¡¨é¡¹ï¼Œè®¡ç®—æœºç³»ç»Ÿå°±ä¸èƒ½å·¥ä½œäº†ã€‚æ‰€ä»¥é¡µè¡¨ä¸€å®šè¦è¦†ç›–å…¨éƒ¨è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸åˆ†çº§çš„é¡µè¡¨å°±éœ€è¦æœ‰1Mä¸ªé¡µè¡¨é¡¹æ¥æ˜ å°„ï¼Œè€ŒäºŒçº§é¡µè¡¨åˆ™æœ€å°‘åªéœ€è¦1Kä¸ªé¡µè¡¨é¡¹ï¼ˆæ­¤æ—¶ä¸€çº§é¡µè¡¨è¦†ç›–åˆ°äº†å…¨éƒ¨è™šæ‹Ÿåœ°å€ç©ºé—´ï¼ŒäºŒçº§é¡µè¡¨åœ¨éœ€è¦æ—¶åˆ›å»ºï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;äºŒçº§é¡µè¡¨å¯ä»¥ä¸åœ¨ä¸»å­˜&#34;&gt;äºŒçº§é¡µè¡¨å¯ä»¥ä¸åœ¨ä¸»å­˜&lt;/h4&gt;
&lt;p&gt;æ²¡æœ‰è¢«ä½¿ç”¨åˆ°çš„äºŒçº§åˆ—è¡¨ä¼šå­˜åœ¨ç£ç›˜ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ä¼šè°ƒåº¦åˆ°ä¸»å­˜ä¸­ç¼“å­˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬æŠŠäºŒçº§é¡µè¡¨å†æ¨å¹¿åˆ°å¤šçº§é¡µè¡¨ï¼Œå°±ä¼šå‘ç°é¡µè¡¨å ç”¨çš„å†…å­˜ç©ºé—´æ›´å°‘äº†ï¼Œè¿™ä¸€åˆ‡éƒ½è¦å½’åŠŸäºå¯¹å±€éƒ¨æ€§åŸç†çš„å……åˆ†åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å›å¤´æƒ³æƒ³ï¼Œè¿™ä¹ˆå¤§å¹…åº¦åœ°è§£å†³å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å¤±å»äº†ä»€ä¹ˆå‘¢ï¼Ÿè®¡ç®—æœºçš„å¾ˆå¤šé—®é¢˜æ— å¤–ä¹å°±æ˜¯æ—¶é—´æ¢ç©ºé—´å’Œç©ºé—´æ¢æ—¶é—´äº†ï¼Œè€Œå¤šçº§é¡µè¡¨å°±æ˜¯å…¸å‹çš„æ—¶é—´æ¢ç©ºé—´çš„ä¾‹å­äº†ï¼ŒåŠ¨æ€åˆ›å»ºäºŒçº§é¡µè¡¨ã€è°ƒå…¥å’Œè°ƒå‡ºäºŒçº§é¡µè¡¨éƒ½æ˜¯éœ€è¦èŠ±è´¹é¢å¤–æ—¶é—´çš„ï¼Œè¿œæ²¡æœ‰ä¸åˆ†çº§çš„é¡µè¡¨æ¥çš„ç›´æ¥ï¼›è€Œæˆ‘ä»¬ä¹Ÿä»…ä»…æ˜¯åˆ©ç”¨å±€éƒ¨æ€§åŸç†è®©è¿™ä¸ªé¢å¤–æ—¶é—´å¼€é”€é™å¾—æ¯”è¾ƒä½äº†è€Œå·²ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Mutexæ¼”è¿›ï¼ˆ2ï¼‰</title>
        <link>https://example.com/p/mutex2/</link>
        <pubDate>Sun, 13 Jun 2021 00:00:00 +0000</pubDate>
        
        <guid>https://example.com/p/mutex2/</guid>
        <description>&lt;img src="https://zzm-1300642547.file.myqcloud.com/blog/images/golang/221956-16033763963867.png" alt="Featured image of post Mutexæ¼”è¿›ï¼ˆ2ï¼‰" /&gt;&lt;h1 id=&#34;mutexæ˜¯å¦‚ä½•å®ç°çš„2&#34;&gt;Mutexæ˜¯å¦‚ä½•å®ç°çš„ï¼ˆ2ï¼‰&lt;/h1&gt;
&lt;p&gt;ä¹‹å‰çœ‹äº†Mutexçš„ç¬¬ä¸€ç‰ˆå®ç°ï¼Œæ¯”è¾ƒç®€å•ï¼Œä¸€ä¸ªflagç”¨æ¥åˆ¤æ–­æ˜¯å¦è·å–åˆ°äº†é”ï¼Œå…¶ä»–çš„goroutineæ’é˜Ÿè·å–é”ï¼Œå¦‚æœæ¢åšæ˜¯æˆ‘ï¼Œæˆ‘èƒ½æƒ³åˆ°çš„å°±æ˜¯ç¬¬ä¸€ç‰ˆçš„å®ç°ã€‚æˆ–è®¸è¿˜ä¼šæ€è€ƒæ¥ä¸‹æ¥çš„goroutineå…¬å¹³ä¸€ç‚¹ï¼Œä¸æ˜¯æ’é˜Ÿè·å–é”ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ç€çœ‹ç¬¬äºŒç‰ˆå®ç°ï¼Œç»™æ–°çš„goroutineä¸€äº›æœºä¼šï¼Œæ€»ç»“æ¥è¯´å°±æ˜¯æ–°åˆ›å»ºçš„goroutineè‚¯å®šåœ¨è¿™ä¸ªæ—¶åˆ»æ˜¯cpuåœ¨è¿è¡Œçš„ï¼Œæ‰€ä»¥æ–°çš„goroutineèƒ½æ‹¿åˆ°é”çš„è¯å°±å‡å°‘äº†ä¸€äº›åˆ‡æ¢çš„æ—¶é—´ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡æ•ˆç‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç»™æ–°äººæœºä¼š&#34;&gt;ç»™æ–°äººæœºä¼š&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;   &lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Mutex&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int32&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;sema&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;uint32&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;


    &lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;mutexLocked&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;iota&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// mutex is locked  //åˆå§‹å€¼ 1
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;mutexWoken&lt;/span&gt; 																	&lt;span class=&#34;c1&#34;&gt;//åˆå§‹å€¼ 2 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;mutexWaiterShift&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;iota&lt;/span&gt; 										&lt;span class=&#34;c1&#34;&gt;//åˆå§‹å€¼ 2
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢å®šä¹‰äº†ä¸€äº›å¸¸é‡ï¼Œ&lt;strong&gt;mutexLocked&lt;/strong&gt; è¡¨ç¤ºæ˜¯å¦æ‹¿åˆ°äº†é”ï¼Œ&lt;strong&gt;mutexWoken&lt;/strong&gt;è¡¨ç¤ºæ˜¯å¦æ˜¯è¢«Unlockå”¤é†’çš„ï¼Œ&lt;strong&gt;mutexWaiterShift&lt;/strong&gt; è¡¨ç¤ºè¿˜æœ‰å¤šå°‘goroutineåœ¨ç­‰å¾…è·å–é”ï¼Œè¿™äº›çŠ¶æ€éƒ½æ˜¯ç”¨&lt;strong&gt;state&lt;/strong&gt;è¿™ä¸€ä¸ªint32ä½çš„å­—æ®µå»è¡¨ç¤ºçš„ï¼Œä½¿ç”¨çš„æ˜¯ä½è¡¨ç¤ºï¼Œæ¯”å¦‚æœ€ä½çš„1ä½è¡¨ç¤ºmutexLockedï¼Œä½ä½çš„ç¬¬äºŒä½è¡¨ç¤ºmutexWokenï¼Œå…¶ä»–çš„è¡¨ç¤ºmutexWaiterShiftã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®æƒ³çœ‹æ‡‚ç¬¬äºŒç‰ˆå°±éœ€è¦å¯¹ä½æ“ä½œæœ‰ä¸€å®šçš„è®¤è¯†ï¼Œä¸‹é¢æˆ‘ä¼šè¯¦ç»†çš„è§£é‡Šä»£ç ä¸­ä½æ“ä½œçš„å«ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://zzm-1300642547.cos.ap-guangzhou.myqcloud.com/blog/images/Mutex%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84%202/image-20210727142702392.png&#34; &gt;
		&lt;img src=&#34;https://zzm-1300642547.cos.ap-guangzhou.myqcloud.com/blog/images/Mutex%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84%202/image-20210727142702392.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20210727142702392&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20210727142702392&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&#34;lock&#34;&gt;Lock&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;   &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Mutex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Fast path: å¹¸è¿caseï¼Œèƒ½å¤Ÿç›´æ¥è·å–åˆ°é”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;atomic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;CompareAndSwapInt32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mutexLocked&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;nx&#34;&gt;awoke&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mutexLocked&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// æ–°çŠ¶æ€åŠ é”ï¼Œå¸Œæœ›è¿™æ¬¡èƒ½æŠ¢åˆ°é”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexLocked&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//å¦‚æœè¢«å”¤é†’ä¹‹å oldæ‹¿åˆ°çš„å€¼ xxxx0 é‚£ä¹ˆ xxxx0 &amp;amp; 00001 == 0
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;nx&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexWaiterShift&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//ç­‰å¾…è€…æ•°é‡åŠ ä¸€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;awoke&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// goroutineæ˜¯è¢«å”¤é†’çš„ï¼Œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;c1&#34;&gt;// æ–°çŠ¶æ€æ¸…é™¤å”¤é†’æ ‡å¿—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;nx&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;^=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mutexWoken&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;atomic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;CompareAndSwapInt32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//è®¾ç½®æ–°çŠ¶æ€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexLocked&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// é”åŸçŠ¶æ€æœªåŠ é”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                    &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
                &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Semacquire&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// è¯·æ±‚ä¿¡å·é‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;nx&#34;&gt;awoke&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é¦–å…ˆè¿˜æ˜¯æœ‰ä¸€ä¸ªå¹¸è¿caseï¼Œå¦‚æœcasæ“ä½œè®¾ç½®stateçš„æ—¶å€™å¯ä»¥ç›´æ¥æˆåŠŸï¼Œé‚£ä¹ˆè¯æ˜æ­¤æ—¶é”æ²¡æœ‰è¢«å ç”¨ï¼ŒæŠ¢åˆ°é”çš„goroutineç›´æ¥returnå»æ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ã€‚å¦‚æœæ²¡æœ‰æŠ¢åˆ°é”ä¼šè¿›å…¥forå¾ªç¯ï¼Œé¦–å…ˆawokeæˆ‘ä»¬ä¸ç®¡ï¼Œç›´æ¥çœ‹forå¾ªç¯é‡Œé¢çš„ä»£ç &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;çœ‹å®Œunlockå†å»çœ‹awokeï¼Œunlockä¹Ÿæ¯”è¾ƒå¤æ‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æƒ…å†µ1ï¼šæ‹¿åˆ°å½“å‰stateçš„çŠ¶æ€ï¼ˆoldï¼‰ï¼Œç›´æ¥ä½¿ç”¨ | æŠŠnewï¼ˆstateï¼‰çš„æœ€ä½ä½è®¾ç½®ä½1ï¼Œè¡¨ç¤ºå¸Œæœ›æ‹¿åˆ°é”ã€‚æ¥ç€è¿›å…¥åˆ¤æ–­ï¼Œå¦‚æœä¹‹å‰æ‹¿åˆ°çš„oldçš„æœ€ä½ä½å°±æ˜¯1ï¼Œé‚£ä¹ˆç›´æ¥ç­‰å¾…è€…+1ï¼Œç„¶åè®¾ç½®æ–°çš„çŠ¶æ€ï¼Œå¹¶ç»§ç»­é˜»å¡ã€‚&lt;/p&gt;
&lt;p&gt;æƒ…å†µ2ï¼š å¦‚æœoldçš„mutexlockdä½æ˜¯0ï¼Œé‚£ä¹ˆä½¿ç”¨casæ“ä½œæŠŠnewè®¾ç½®ä¸ºæ–°çš„stateå¹¶breakç›´æ¥è¿”å›ï¼Œè¡¨ç¤ºå½“å‰goroutineæ‹¿åˆ°äº†é”ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆéœ€è¦casæ“ä½œï¼Œåœ¨è¿™é‡Œå†è§£é‡Šä¸€ä¸‹ï¼Œå¦‚æœæŠŠnewè®¾ç½®æˆstateçš„æ—¶å€™ï¼Œå…¶ä»–goroutineä¹Ÿåœ¨æ‰§è¡Œè¿™å—çš„é€»è¾‘ï¼Œå¦‚æœæ¯”å…¶ä»–goroutineæ…¢äº†ä¸€æ­¥ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆæœ‰å¤šä¸ª2ä¸ªæˆ–è€…å¤šä¸ªgoroutine breakäº†ã€‚å°±åŒæ—¶æ‰§è¡Œä¸´ç•ŒåŒºä»£ç äº†ã€‚æ‰€ä»¥casæ“ä½œæ˜¯é”çš„ç²¾é«“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;unlock&#34;&gt;Unlock&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;   &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Mutex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Fast path: drop lock bit.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;atomic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;AddInt32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexLocked&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//å»æ‰é”æ ‡å¿—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexLocked&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexLocked&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//æœ¬æ¥å°±æ²¡æœ‰åŠ é”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;sync: unlock of unlocked mutex&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
        &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;new&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexWaiterShift&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexLocked&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexWoken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// æ²¡æœ‰ç­‰å¾…è€…ï¼Œæˆ–è€…æœ‰å”¤é†’çš„waiterï¼Œæˆ–è€…é”åŸæ¥å·²åŠ é”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mutexWaiterShift&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mutexWoken&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// æ–°çŠ¶æ€ï¼Œå‡†å¤‡å”¤é†’goroutineï¼Œå¹¶è®¾ç½®å”¤é†’æ ‡å¿—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;atomic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;CompareAndSwapInt32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Semrelease&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;old&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é¦–å…ˆcasæ“ä½œï¼ŒæŠŠstate-1ï¼Œæ„æ€å°±æ˜¯é”æ ‡å¿—ä½=0ï¼Œç„¶ååˆ¤æ–­ä¹‹å‰æ˜¯å¦æ˜¯åŠ é”çŠ¶æ€ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰åŠ é”ç›´æ¥è§£é”ä¼španicï¼Œè¿™ç‚¹è¦æ³¨æ„ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åè¿›å…¥forå¾ªç¯ï¼Œç¬¬ä¸€ä¸ªifæœ‰2ä¸ªæƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;**æƒ…å†µ1ï¼š**ä¹‹å‰æ³¨é‡Šä¸­æ ‡è®°äº†ï¼ŒmutexWaiterShiftæ˜¯==2ï¼Œæ„æ€å°±æ˜¯32ä½çš„intä¸­ï¼Œé«˜30ä½æ˜¯mutexWaiterShiftï¼ŒæŠŠä½2ä½ç§»é™¤ä¹‹åå¦‚æœæ˜¯0ï¼Œé‚£ä¹ˆæ„å‘³ç€æ²¡æœ‰ç­‰å¾…è€…äº†å¯ä»¥ç›´æ¥è¿”å›ï¼Œè§£é”æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æƒ…å†µ2ï¼š&lt;/strong&gt; **mutexLocked | mutexWoken == 01 | 10 = 11 ** ï¼Œä½¿ç”¨oldå»&amp;amp;çš„è¯ï¼Œold &amp;amp; 0011ï¼Œæ£€æŸ¥è§£é”åæ˜¯å¦ä¸ºå”¤é†’å’ŒåŠ é”çŠ¶æ€ã€‚å¦‚æœç»“æœä¸ä¸º 0ï¼Œè¯æ˜è¿˜æœ‰å…¶ä»–åç¨‹å°† state è®¾ç½®ä¸ºå”¤é†’æˆ–åŠ é”çŠ¶æ€ï¼Œé‡Šæ”¾é”ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æƒ…å†µ2å¯ä»¥è¿™æ ·ç†è§£ï¼Œåœ¨unlockçš„ç¬¬ä¸€å¥å°±ç›´æ¥ä½¿ç”¨casæŠŠstate mutexlockedçš„çŠ¶æ€æ”¹æˆ0äº†ï¼Œæ‰€æœ‰å¦‚æœæ­¤æ—¶æœ‰æ–°å¼€çš„gorouineæ˜¯å¯ä»¥ç›´æ¥è·å–åˆ°é”çš„ï¼Œè€çš„goroutineåœ¨é˜»å¡ä¸­æ²¡æœ‰è¢«å”¤é†’ã€‚è¿™å°±æ˜¯ç»™æ–°äººæœºä¼š&amp;hellip;ï¼Œå¦‚æœæ²¡æœ‰æ–°å¼€çš„goroutineé‚£ä¹ˆåˆ¤æ–­mutexWokenæ˜¯å¦ä¸º1ï¼Œå¦‚æœä¸º1åˆ™è¡¨ç¤ºæœ‰è¢«å”¤é†’çš„goroutineï¼Œç›´æ¥è§£é”æˆåŠŸ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰èµ°è¿›ä¸Šé¢çš„ifï¼Œé‚£ä¹ˆä¼šæŠŠç­‰å¾…çš„mutexWaiterShift -1ï¼Œç„¶åæŠŠmutexWokenè®¾ç½®ä¸º1ï¼Œä½¿ç”¨casæ“ä½œæŠŠæ–°çŠ¶æ€è®¾ç½®è¿›å»ï¼Œç„¶åå”¤é†’å…¶ä»–goroutineï¼Œreturnæ‰ï¼Œè¡¨ç¤ºè§£é”æˆåŠŸã€‚å¦‚æœåœ¨æ‰§è¡Œcasçš„è¿‡ç¨‹ä¸­å‘ç°stateè¢«å…¶ä»–goroutineæ”¹æ‰äº†ï¼Œé‚£ä¹ˆcontinueï¼Œé‡æ–°æ¥ä¸€éã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å…¶å®æˆ‘ä¹‹å‰å¯¹mutexWokenè¿˜ä¸æ˜¯å¾ˆç†è§£ï¼Œä½†æ˜¯ä¹‹åæˆ‘æƒ³é€šäº†ï¼Œæˆ‘æ˜¯è¿™ä¹ˆæƒ³çš„&amp;hellip; å¦‚æœunlockæŠŠwokenè®¾ç½®ä¸º1 å”¤é†’å…¶ä»–goroutineä¹‹åï¼Œæ­¤æ—¶æœ‰æ–°çš„goroutineè¿›æ¥çš„ï¼Œæ–°è¿›æ¥çš„awokeæ˜¯falseï¼Œæ˜¯æ²¡æœ‰åŠæ³•æŠŠwokenç½®ä¸º0çš„ï¼Œç„¶åæ–°çš„goroutineæ‰§è¡Œçš„åˆæ¯”è¾ƒå¿«ï¼Œåœ¨å…¶ä»–goroutineè¢«é˜»å¡ä¹‹å‰å°±é‡Šæ”¾äº†é”ï¼Œé‚£ä¹ˆæ¡ä»¶old&amp;amp;(mutexLocked|mutexWoken) != 0  å°±ä¼šé€šè¿‡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;å…¶å®ç¬¬äºŒç‰ˆç†è§£èµ·æ¥ä¹Ÿæ˜¯ç¨å¾®æœ‰ç‚¹å›°éš¾ï¼Œæˆ‘ä¸ªäººå»çœ‹æ¯”è¾ƒå®¹æ˜“ï¼Œä½†æ˜¯ç”¨è‡ªå·±çš„è¯æ€»ç»“æˆåšå®¢å°±æ˜¯ä¸€ç§é”»ç‚¼äº†ã€‚ä¸‹ä¸€ç¯‡å°±æ˜¯ç¬¬ä¸‰ç‰ˆäº†ï¼Œå¤šç»™äº›æœºä¼šï¼Œå’Œç¬¬å››ç‰ˆ è§£å†³é¥¥é¥¿é—®é¢˜.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Mutexæ¼”è¿›ï¼ˆ1ï¼‰</title>
        <link>https://example.com/p/mutex1/</link>
        <pubDate>Sat, 12 Jun 2021 00:00:00 +0000</pubDate>
        
        <guid>https://example.com/p/mutex1/</guid>
        <description>&lt;img src="https://zzm-1300642547.file.myqcloud.com/blog/images/golang/221956-16033763963867.png" alt="Featured image of post Mutexæ¼”è¿›ï¼ˆ1ï¼‰" /&gt;&lt;h2 id=&#34;mutexæ˜¯å¦‚ä½•å®ç°çš„1&#34;&gt;Mutexæ˜¯å¦‚ä½•å®ç°çš„ï¼ˆ1ï¼‰&lt;/h2&gt;
&lt;p&gt;ä¹‹å‰æœ‰çœ‹ä¸€æœ¬ä¹¦ä¸Šé¢å†™äº†mutexæ˜¯å¦‚ä½•å®ç°çš„ï¼Œä½¿ç”¨å¤§å®¶éƒ½ä¼šç”¨ï¼Œæ— éå°±æ˜¯Lockå’ŒUnlockï¼Œå®ç°çš„æ˜¯Lockeræ¥å£ã€‚åœ¨æ­¤è®°å½•ä¸€ä¸‹Mutexä»ç¬¬ä¸€ç‰ˆåˆ°ç°åœ¨æœ€æ–°ç‰ˆæœ¬æ˜¯å¦‚ä½•å®ç°å’Œæ¼”å˜çš„ã€‚ï¼ˆgo 1.16ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;ä»€ä¹ˆæ˜¯mutex&#34;&gt;ä»€ä¹ˆæ˜¯Mutex&lt;/h3&gt;
&lt;p&gt;äº’æ–¥é”æ˜¯å¹¶å‘æ§åˆ¶çš„ä¸€ä¸ªæ‰‹æ®µï¼Œä¸ºäº†é¿å…ç«äº‰è€Œå»ºç«‹çš„å¹¶å‘æœºåˆ¶ï¼Œåœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå¦‚æœç¨‹åºä¸­çš„ä¸€éƒ¨åˆ†ä¼šè¢«å¹¶å‘çš„è®¿é—®æˆ–è€…ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥è€ƒè™‘ä½¿ç”¨mutexå»ä¿æŠ¤èµ·æ¥ï¼Œè¿™éƒ¨åˆ†è¢«ä¿æŠ¤çš„åŒºåŸŸå°±æ˜¯ &lt;strong&gt;ä¸´ç•ŒåŒº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Mutexçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œå°±åƒä¸‹é¢è¿™æ ·&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Mutex&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//ä¸´ç•ŒåŒº
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œæˆ‘æ‘˜æŠ„ä¸€ä¸‹ç½‘ä¸Šçš„å›¾ç‰‡&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 186; 
			flex-basis: 447px&#34;
	&gt;
	&lt;a href=&#34;https://example.com/p/mutex1/1.png&#34; data-size=&#34;1084x582&#34;&gt;
		&lt;img src=&#34;https://example.com/p/mutex1/1.png&#34;
			width=&#34;1084&#34;
			height=&#34;582&#34;
			srcset=&#34;https://example.com/p/mutex1/1_hucf7ff398cf87bbecbee6634eca50e0bf_148702_480x0_resize_box_3.png 480w, https://example.com/p/mutex1/1_hucf7ff398cf87bbecbee6634eca50e0bf_148702_1024x0_resize_box_3.png 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;image-20210726190116730&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20210726190116730&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;æœ€åˆçš„mutex&#34;&gt;æœ€åˆçš„Mutex&lt;/h3&gt;
&lt;p&gt;ä»‹ç»å®Œä¹‹åå°±ç›´æ¥çœ‹çœ‹ç¬¬ä¸€ç‰ˆçš„Mutexä»£ç ï¼Œåˆç‰ˆçš„ä»£ç åªæœ‰ä¸€ä¸ªflagè¡¨ç¤ºé”æ˜¯å¦è¢«æŒæœ‰ï¼Œå®ç°ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ææ‡‚åŸå­æ“ä½œçš„ä»£ç å°±èƒ½çœ‹æ‡‚ï¼ˆcasï¼‰ï¼Œ&lt;strong&gt;å¦‚æœflag=1å°±è¡¨ç¤ºè¢«æŒæœ‰äº†ï¼Œå¦‚æœæ˜¯0é‚£ä¹ˆé”å°±ä¼šè¢«goroutineä»¬å»ç«äº‰ï¼ŒæŠ¢åˆ°çš„goroutineå°±ä¼šæŠŠmutexçš„flagè®¾ç½®ä¸º1ï¼Œç„¶åç»§ç»­æ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;   // CASæ“ä½œï¼Œå½“æ—¶è¿˜æ²¡æœ‰æŠ½è±¡å‡ºatomicåŒ…
    func cas(val *int32, old, new int32) bool
    func semacquire(*int32) //é˜»å¡
    func semrelease(*int32) //å”¤é†’
    // äº’æ–¥é”çš„ç»“æ„ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µ
    type Mutex struct {
        key  int32 // é”æ˜¯å¦è¢«æŒæœ‰çš„æ ‡è¯†
        sema int32 // ä¿¡å·é‡ä¸“ç”¨ï¼Œç”¨ä»¥é˜»å¡/å”¤é†’goroutine
    }
    
    // ä¿è¯æˆåŠŸåœ¨valä¸Šå¢åŠ deltaçš„å€¼
    func xadd(val *int32, delta int32) (new int32) {
        for {
            v := *val //ä¿å­˜vçš„å€¼
            if cas(val, v, v+delta) { //casæ“ä½œï¼Œæ¯”è¾ƒvalå’Œä¹‹å‰ä¿å­˜çš„væ˜¯å¦æœ‰å˜æ›´ å¦‚æœæ²¡æœ‰å˜æ›´åˆ™æŠŠvalè®¾ç½®ä¸ºæ–°çš„å€¼
                return v + delta  
            }
        }
        panic(&amp;quot;unreached&amp;quot;)
    }
    
    // è¯·æ±‚é”
    func (m *Mutex) Lock() {
        if xadd(&amp;amp;m.key, 1) == 1 { //æ ‡è¯†åŠ 1ï¼Œå¦‚æœç­‰äº1ï¼ŒæˆåŠŸè·å–åˆ°é”
            return
        }
        semacquire(&amp;amp;m.sema) // å¦åˆ™é˜»å¡ç­‰å¾…
    }
    
    func (m *Mutex) Unlock() {
        if xadd(&amp;amp;m.key, -1) == 0 { // å°†æ ‡è¯†å‡å»1ï¼Œå¦‚æœç­‰äº0ï¼Œåˆ™æ²¡æœ‰å…¶å®ƒç­‰å¾…è€…
            return
        }
        semrelease(&amp;amp;m.sema) // å”¤é†’å…¶å®ƒé˜»å¡çš„goroutine
    }    
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»ç¬¬ä¸€ç‰ˆçš„mutexå¯ä»¥çœ‹å‡ºæ¥ï¼Œå¦‚æœæœ‰10ä¸ªgoroutineå»ç«äº‰ï¼Œé‚£ä¹ˆå½“å…¶ä¸­ä¸€ä¸ªgoroutineç«äº‰åˆ°çš„æ—¶å€™ä¼šæŠŠflagåŠ 1ï¼Œå¦‚æœåŠ 1ä¹‹å==1é‚£ä¹ˆæ„å‘³ç€ä¹‹å‰æ˜¯0ï¼Œè¡¨ç¤ºæ²¡æœ‰goroutineæŠ¢åˆ°äº†é”ï¼Œé‚£ä¹ˆç›´æ¥returnå»æ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ã€‚å½“ä¸´ç•ŒåŒºçš„ä»£ç æ‰§è¡Œå®Œæ¯•ä¹‹åä¼šæ‰§è¡ŒUnlockï¼Œæ²¡æœ‰æŠ¢åˆ°é”çš„goroutineä¼šè¢«&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹çœ‹unlockçš„é€»è¾‘ï¼Œä¼šè°ƒç”¨xaddå‡½æ•°ï¼ŒæŠŠflag-1ï¼Œæ­¤æ—¶flagåº”è¯¥æ˜¯9ï¼Œè¯æ˜è¿˜æœ‰å…¶ä»–ç­‰å¾…è€…ï¼Œæ‰€æœ‰ç›´æ¥å”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„goroutineï¼Œç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œå”¤é†’çš„ä¹‹åæ˜¯æ²¡æœ‰æŠ¢é”è¿™ä¸ªæ“ä½œçš„ï¼Œå…¶ä»–goroutineä¼šç›´æ¥å›åˆ°lockä¸­è¢«å”¤é†’ç„¶åè¿”å›ï¼Œé”ä¼šå”¤é†’é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;å…¶å®æœ€åå¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€ç‰ˆä¸­æœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œæ¯”å¦‚åªæœ‰ç¬¬ä¸€æ¬¡ä¼šæŠ¢é”ï¼Œå…¶ä»–çš„goroutineåªèƒ½æ’é˜Ÿï¼Œå¦‚æœæ¥äº†æ–°äººä¹Ÿåªèƒ½æ’é˜Ÿã€‚æ­¤æ—¶æ­¤åˆ»åˆšå¥½å¯åŠ¨ä¸€ä¸ªgoroutineï¼Œcpuæ­£åœ¨è¿è¡Œå®ƒï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™ä»–èƒ½ç›´æ¥æŠ¢åˆ°é”é‚£ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çº¦æ—¶é—´ã€‚ä¸‹ä¸€ç¯‡è®°å½•ç¬¬äºŒç‰ˆmutexæ˜¯å¦‚ä½•å®ç°çš„&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
